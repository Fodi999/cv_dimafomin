@import "tailwindcss";
@import "tw-animate-css";

/* stylelint-disable-next-line */
@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

/* ============================================
   CSS VARIABLES - DESIGN TOKENS LAYER
   ============================================ */

:root {
  --radius: 0.625rem;
  
  /* ===== COLOR TOKENS (RGB for alpha support) ===== */
  /* Primary Colors */
  --color-primary-rgb: 59 200 100; /* #3BC864 - Irradiated Toad */
  --color-primary-light-rgb: 197 233 138; /* #C5E98A - Avocado Smoothie */
  
  /* Secondary Colors */
  --color-secondary-rgb: 43 106 121; /* #2B6A79 - Waterberry */
  --color-secondary-light-rgb: 254 249 245; /* #FEF9F5 - Hot White */
  
  /* Background Colors */
  --color-bg-rgb: 254 249 245; /* Light: Hot White */
  --color-bg-dark-rgb: 36 15 36; /* Dark: Mystic Void */
  --color-bg-muted-rgb: 224 216 208; /* Muted: Border color */
  
  /* Text Colors */
  --color-text-primary-rgb: 36 15 36; /* Mystic Void */
  --color-text-secondary-rgb: 30 26 65; /* Sea by Night */
  --color-text-muted-rgb: 224 216 208; /* Muted gray */
  
  /* Accent Colors */
  --color-success-rgb: 59 200 100; /* Same as primary */
  --color-warning-rgb: 255 184 0; /* Orange */
  --color-error-rgb: 239 68 68; /* Red */
  --color-info-rgb: 59 130 246; /* Blue */
  
  /* ===== SPACING (8px base) ===== */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 12px;
  --spacing-lg: 16px;
  --spacing-xl: 24px;
  --spacing-2xl: 32px;
  --spacing-3xl: 48px;
  
  /* ===== BORDER RADIUS ===== */
  --radius-xs: 4px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-full: 9999px;
  
  /* ===== SHADOWS ===== */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.12);
  --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.16);
  --shadow-xl: 0 12px 32px rgba(0, 0, 0, 0.20);
  --shadow-2xl: 0 16px 48px rgba(0, 0, 0, 0.24);
  
  /* ===== TRANSITIONS & ANIMATIONS ===== */
  --transition-xs: 75ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-sm: 100ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-md: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-lg: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-xl: 300ms cubic-bezier(0.4, 0, 0.2, 1);
  
  /* ===== Z-INDEX SCALE ===== */
  --z-hide: -1;
  --z-base: 0;
  --z-dropdown: 1000;
  --z-sticky: 1020;
  --z-fixed: 1030;
  --z-modal-backdrop: 1040;
  --z-modal: 1050;
  --z-popover: 1060;
  --z-tooltip: 1070;
  
  /* ===== TYPOGRAPHY (from design-tokens.ts) ===== */
  --font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",
    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",
    sans-serif;
  --font-mono: "Menlo", "Consolas", "Monaco", "Courier New", monospace;
  
  /* ===== THEME COLORS (mapped to semantic roles) ===== */
  /* Light mode defaults */
  --color-background: rgb(var(--color-bg-rgb));
  --color-foreground: rgb(var(--color-text-primary-rgb));
  --card: #FFFFFF;
  --card-foreground: rgb(var(--color-text-primary-rgb));
  --popover: #FFFFFF;
  --popover-foreground: rgb(var(--color-text-primary-rgb));
  --primary: rgb(var(--color-primary-rgb));
  --primary-foreground: #FEF9F5;
  --secondary: rgb(var(--color-primary-light-rgb));
  --secondary-foreground: rgb(var(--color-text-primary-rgb));
  --muted: #E0D8D0;
  --muted-foreground: rgb(var(--color-text-muted-rgb));
  --accent: rgb(var(--color-secondary-rgb));
  --accent-foreground: #FEF9F5;
  --destructive: rgb(239 68 68);
  --border: #E0D8D0;
  --input: #E0D8D0;
  --ring: rgb(var(--color-primary-rgb));
  
  /* Chart colors */
  --chart-1: #3BC864;
  --chart-2: #2B6A79;
  --chart-3: #C5E98A;
  --chart-4: #1E1A41;
  --chart-5: #240F24;
  
  /* Sidebar */
  --sidebar: #FEF9F5;
  --sidebar-foreground: rgb(var(--color-text-primary-rgb));
  --sidebar-primary: rgb(var(--color-primary-rgb));
  --sidebar-primary-foreground: #FEF9F5;
  --sidebar-accent: rgb(var(--color-primary-light-rgb));
  --sidebar-accent-foreground: rgb(var(--color-text-primary-rgb));
  --sidebar-border: #E0D8D0;
  --sidebar-ring: rgb(var(--color-primary-rgb));
}

/* ============================================
   DARK MODE - CSS VARIABLES OVERRIDE
   ============================================ */

.dark {
  /* Dark mode color overrides (RGB for alpha support) */
  --color-bg-rgb: 15 15 20; /* Very dark background */
  --color-bg-dark-rgb: 10 10 15; /* Even darker */
  --color-bg-muted-rgb: 50 50 60; /* Dark muted */
  
  --color-text-primary-rgb: 250 250 255; /* Almost white */
  --color-text-secondary-rgb: 200 200 210; /* Light gray */
  --color-text-muted-rgb: 120 120 140; /* Muted gray */
  
  /* Keep accent colors more vibrant in dark mode */
  --color-primary-rgb: 100 220 130; /* Brighter green */
  --color-primary-light-rgb: 180 230 100; /* Brighter yellow-green */
  --color-secondary-rgb: 80 180 200; /* Brighter cyan */
  
  /* Theme color overrides */
  --background: rgb(var(--color-bg-rgb));
  --foreground: rgb(var(--color-text-primary-rgb));
  --card: #1a1a25;
  --card-foreground: rgb(var(--color-text-primary-rgb));
  --popover: #1a1a25;
  --popover-foreground: rgb(var(--color-text-primary-rgb));
  --primary: rgb(var(--color-primary-rgb));
  --primary-foreground: #0f0f14;
  --secondary: rgb(var(--color-primary-light-rgb));
  --secondary-foreground: #0f0f14;
  --muted: #404050;
  --muted-foreground: rgb(var(--color-text-muted-rgb));
  --accent: rgb(var(--color-secondary-rgb));
  --accent-foreground: #0f0f14;
  --destructive: #ff6b6b; /* Brighter red */
  --border: #303040;
  --input: #2a2a35;
  --ring: rgb(var(--color-primary-rgb));
  
  /* Chart colors - brighter for dark mode */
  --chart-1: #64dc82;
  --chart-2: #50b4c8;
  --chart-3: #b4e664;
  --chart-4: #a78bfa;
  --chart-5: #f97316;
  
  /* Sidebar dark mode */
  --sidebar: #1a1a25;
  --sidebar-foreground: rgb(var(--color-text-primary-rgb));
  --sidebar-primary: rgb(var(--color-primary-rgb));
  --sidebar-primary-foreground: #0f0f14;
  --sidebar-accent: rgb(var(--color-primary-light-rgb));
  --sidebar-accent-foreground: #0f0f14;
  --sidebar-border: #303040;
  --sidebar-ring: rgb(var(--color-primary-rgb));
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  
  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari and Opera */
  }
  
  html {
    /* scroll-behavior moved to data attribute to avoid Next.js warning */
    -webkit-overflow-scrolling: touch;
    /* Prevent zoom on double tap */
    touch-action: manipulation;
    -ms-touch-action: manipulation;
  }
  html[data-scroll-behavior="smooth"] {
    scroll-behavior: smooth;
  }
  body {
    @apply bg-background text-foreground;
    overscroll-behavior: none;
    /* Prevent pull-to-refresh bounce on iOS */
    -webkit-overflow-scrolling: touch;
    /* Safe area insets for iOS notch and home indicator */
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* Allow all touch interactions for buttons and interactive elements */
  button,
  a,
  input,
  textarea,
  select,
  [role="button"],
  [role="link"] {
    touch-action: manipulation;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }

  /* Allow text selection in inputs and textareas */
  input,
  textarea {
    -webkit-user-select: text;
    user-select: text;
  }
}

/* PWA and iOS specific styles */
@supports (padding: env(safe-area-inset-top)) {
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
}

/* ============================================
   CUSTOM ANIMATIONS FOR MODAL
   ============================================ */

/* Fade in animation for overlay */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Modal appear animation - scale + fade */
@keyframes modal-appear {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Slide up animation (alternative) */
@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Bounce in animation (alternative) */
@keyframes bounce-in {
  0% {
    opacity: 0;
    transform: scale(0.3);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
  }
}

/* Apply animations */
.animate-fade-in {
  animation: fade-in 0.3s ease-out forwards;
}

.animate-modal-appear {
  animation: modal-appear 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-slide-up {
  animation: slide-up 0.5s ease-out forwards;
}

.animate-bounce-in {
  animation: bounce-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
}
