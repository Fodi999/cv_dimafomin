# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏

## üêõ –ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### 1. **–°–∫—Ä–æ–ª–ª –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–ª—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ—Ü–µ–ø—Ç–∞**
```tsx
// ‚ùå –ë–´–õ–û: –°–∫—Ä–æ–ª–ª –æ—Å—Ç–∞–≤–∞–ª—Å—è –≤ —Å—Ç–∞—Ä–æ–π –ø–æ–∑–∏—Ü–∏–∏
// –ö–æ–≥–¥–∞ –∫–ª–∞—Ü–∞–µ—Ç–µ –Ω–∞ –¥—Ä—É–≥—É—é –∫–∞—Ä—Ç–æ—á–∫—É, –ø–∞–Ω–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–ª–∞—Å—å –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

// ‚úÖ –°–¢–ê–õ–û: –°–∫—Ä–æ–ª–ª —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è
useEffect(() => {
  if (isOpen && panelRef.current) {
    panelRef.current.scrollTop = 0;  // –°–∫—Ä–æ–ª–∏–º –≤ –Ω–∞—á–∞–ª–æ
    setCurrentPhotoIndex(0);         // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ç–æ –Ω–∞ –ø–µ—Ä–≤–æ–µ
  }
}, [isOpen, recipe.id]);
```

### 2. **–ò–Ω–¥–µ–∫—Å —Ñ–æ—Ç–æ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–ª—Å—è**
```tsx
// ‚ùå –ë–´–õ–û: –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –¥—Ä—É–≥–æ–π —Ä–µ—Ü–µ–ø—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å —Å—Ç–∞—Ä–æ–µ —Ñ–æ—Ç–æ
// –ü—Ä–∏–º–µ—Ä: –°–º–æ—Ç—Ä–∏—Ç–µ 3–µ —Ñ–æ—Ç–æ –≤ —Ä–µ—Ü–µ–ø—Ç–µ A ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ —Ä–µ—Ü–µ–ø—Ç B ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 3–µ —Ñ–æ—Ç–æ B

// ‚úÖ –°–¢–ê–õ–û: –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ–º —Å –ø–µ—Ä–≤–æ–≥–æ —Ñ–æ—Ç–æ
setCurrentPhotoIndex(0);  // –í useEffect
```

### 3. **–ö—Ä–∞—Ö –ø—Ä–∏ –ø—É—Å—Ç–æ–º —Ñ–æ—Ç–æ**
```tsx
// ‚ùå –ë–´–õ–û: –ï—Å–ª–∏ —Ñ–æ—Ç–æ undefined –∏–ª–∏ null ‚Üí –æ—à–∏–±–∫–∞
photos[currentPhotoIndex].startsWith("data:")

// ‚úÖ –°–¢–ê–õ–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
{photos[currentPhotoIndex] && photos[currentPhotoIndex].startsWith("data:") ? (
  <img src={...} />
) : (
  <div>{photos[currentPhotoIndex] || "üç≥"}</div>
)}
```

### 4. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—É—Å—Ç–æ–π description**
```tsx
// ‚ùå –ë–´–õ–û: –ü—ã—Ç–∞–ª–∏—Å—å —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å description –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏
<p>{recipe.description}</p>

// ‚úÖ –°–¢–ê–õ–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
{recipe.description && (
  <div>
    <h3>üìù –û–ø–∏—Å</h3>
    <p>{recipe.description}</p>
  </div>
)}
```

### 5. **Z-index –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∫–Ω–æ–ø–æ–∫**
```tsx
// ‚ùå –ë–´–õ–û: –ö–Ω–æ–ø–∫–∏ –º–æ–≥–ª–∏ —Å–∫—Ä—ã—Ç—å—Å—è –ø–æ–¥ –¥—Ä—É–≥–∏–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
className="absolute left-2 top-1/2 -translate-y-1/2 p-1.5 ..."

// ‚úÖ –°–¢–ê–õ–û: –ö–Ω–æ–ø–∫–∏ –≤—Å–µ–≥–¥–∞ —Å–≤–µ—Ä—Ö—É
className="... z-10"
```

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `useRef` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ DOM —ç–ª–µ–º–µ–Ω—Ç–∞–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `useEffect` –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞ –∏ —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null/undefined –¥–ª—è —Ñ–æ—Ç–æ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º description
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `z-index: 10` –¥–ª—è –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `loading="lazy"` –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ üç≥ –µ—Å–ª–∏ —Ñ–æ—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

---

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—ã—Ç–∏–π:

```
1Ô∏è‚É£ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∞—Ü–∞–µ—Ç "–î–µ—Ç–∞–ª—ñ" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ
   ‚Üì
2Ô∏è‚É£ RecipePreviewCard: setShowDetails(true)
   ‚Üì
3Ô∏è‚É£ RecipeDetailsModal: isOpen —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è true
   ‚Üì
4Ô∏è‚É£ motion.div —Å–∫–æ–ª—å–∑–∏—Ç —Å–ø—Ä–∞–≤–∞ (animation 300ms)
   ‚Üì
5Ô∏è‚É£ useEffect —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
   - panelRef.current.scrollTop = 0  ‚Üê –°–∫—Ä–æ–ª–∏–º –≤–≤–µ—Ä—Ö
   - setCurrentPhotoIndex(0)          ‚Üê –ü–µ—Ä–≤–æ–µ —Ñ–æ—Ç–æ
   ‚Üì
6Ô∏è‚É£ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

### –°–º–µ–Ω–∞ —Ä–µ—Ü–µ–ø—Ç–∞:

```
1Ô∏è‚É£ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∞—Ü–∞–µ—Ç –¥—Ä—É–≥—É—é –∫–∞—Ä—Ç–æ—á–∫—É (–ø–∞–Ω–µ–ª—å —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞)
   ‚Üì
2Ô∏è‚É£ recipe.id –∏–∑–º–µ–Ω—è–µ—Ç—Å—è (props update)
   ‚Üì
3Ô∏è‚É£ useEffect —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å recipe.id)
   ‚Üì
4Ô∏è‚É£ –°–∫—Ä–æ–ª–∏–º –≤–≤–µ—Ä—Ö + —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–Ω–¥–µ–∫—Å —Ñ–æ—Ç–æ
   ‚Üì
5Ô∏è‚É£ –ü–∞–Ω–µ–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–ø–ª–∞–≤–Ω–æ)
```

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### RecipeDetailsModal.tsx

#### 1. –ò–º–ø–æ—Ä—Ç—ã:
```tsx
// –î–û–ë–ê–í–õ–ï–ù–û:
import { useState, useEffect, useRef } from "react";
```

#### 2. –°–æ—Å—Ç–æ—è–Ω–∏–µ:
```tsx
// –î–û–ë–ê–í–õ–ï–ù–û:
const panelRef = useRef<HTMLDivElement>(null);

// –ë–´–õ–û:
const [currentPhotoIndex, setCurrentPhotoIndex] = useState(0);

// –°–¢–ê–õ–û: (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–±—Ä–æ—Å –≤ useEffect)
```

#### 3. useEffect:
```tsx
// –î–û–ë–ê–í–õ–ï–ù–û:
useEffect(() => {
  if (isOpen && panelRef.current) {
    panelRef.current.scrollTop = 0;  // –°–∫—Ä–æ–ª–∏–º –≤ –Ω–∞—á–∞–ª–æ
    setCurrentPhotoIndex(0);         // –ü–µ—Ä–≤–æ–µ —Ñ–æ—Ç–æ
  }
}, [isOpen, recipe.id]);  // –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∏–ª–∏ —Å–º–µ–Ω–µ —Ä–µ—Ü–µ–ø—Ç–∞
```

#### 4. –ü–∞–Ω–µ–ª—å:
```tsx
// –ë–´–õ–û:
<motion.div ... className="... overflow-y-auto">

// –°–¢–ê–õ–û:
<motion.div 
  ref={panelRef}  // ‚Üê –î–æ–±–∞–≤–ª–µ–Ω ref
  ... 
  className="... overflow-y-auto"
>
```

#### 5. –ó–∞—â–∏—Ç–∞ —Ñ–æ—Ç–æ:
```tsx
// –ë–´–õ–û:
{photos[currentPhotoIndex].startsWith("data:") ? (

// –°–¢–ê–õ–û:
{photos[currentPhotoIndex] && photos[currentPhotoIndex].startsWith("data:") ? (
  <img ... />
) : photos[currentPhotoIndex] ? (
  <div>{photos[currentPhotoIndex]}</div>
) : (
  <div>üç≥</div>  // –î–µ—Ñ–æ–ª—Ç
)}
```

#### 6. –ó–∞—â–∏—Ç–∞ description:
```tsx
// –ë–´–õ–û:
<div>
  <h3>üìù –û–ø–∏—Å</h3>
  <p>{recipe.description}</p>
</div>

// –°–¢–ê–õ–û:
{recipe.description && (
  <div>
    <h3>üìù –û–ø–∏—Å</h3>
    <p>{recipe.description}</p>
  </div>
)}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏
```
1. –ö–ª–∞—Ü–∞–π—Ç–µ "–î–µ—Ç–∞–ª—ñ" –Ω–∞ –ª—é–±–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
2. ‚úÖ –ü–∞–Ω–µ–ª—å –ø—Ä–∏–µ–∑–∂–∞–µ—Ç —Å–ø—Ä–∞–≤–∞
3. ‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ñ–æ—Ç–æ (–µ—Å–ª–∏ –µ—Å—Ç—å)
4. ‚úÖ –°–∫—Ä–æ–ª–ª –≤ –≤–µ—Ä—Ö–Ω–µ–π –ø–æ–∑–∏—Ü–∏–∏
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Ä–µ—Ü–µ–ø—Ç–∞–º–∏
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å —Ä–µ—Ü–µ–ø—Ç–∞ A
2. –°–∫—Ä–æ–ª–∏—Ç–µ –≤–Ω–∏–∑ (—á–∏—Ç–∞–π—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã)
3. –ö–ª–∞—Ü–∞–π—Ç–µ "–î–µ—Ç–∞–ª—ñ" –Ω–∞ —Ä–µ—Ü–µ–ø—Ç–µ B
4. ‚úÖ –ü–∞–Ω–µ–ª—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Ä–µ—Ü–µ–ø—Ç B
5. ‚úÖ –°–∫—Ä–æ–ª–ª —Å–±—Ä–æ—à–µ–Ω (–≤–∏–¥–Ω—ã —Ñ–æ—Ç–æ —Å–≤–µ—Ä—Ö—É)
6. ‚úÖ –ò–Ω–¥–µ–∫—Å —Ñ–æ—Ç–æ = 0 (–ø–µ—Ä–≤–æ–µ —Ñ–æ—Ç–æ B, –Ω–µ —Ç—Ä–µ—Ç—å–µ –∫–∞–∫ –±—ã–ª–æ –≤ A)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–µ—Ü–µ–ø—Ç –±–µ–∑ —Ñ–æ—Ç–æ
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ—Ü–µ–ø—Ç "–ë–æ—Ä—â —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ–π" (–Ω–µ—Ç —Ñ–æ—Ç–æ)
2. ‚úÖ –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "üì∏ –§–æ—Ç–æ" —Ä–∞–∑–¥–µ–ª
3. ‚úÖ –°—Ä–∞–∑—É –≤–∏–¥–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã
4. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Ñ–æ—Ç–æ
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ—Ü–µ–ø—Ç —Å —Ñ–æ—Ç–æ
2. –ö–ª–∞—Ü–∞–π—Ç–µ —Å—Ç—Ä–µ–ª–∫–∏ (‚Üê ‚Üí)
3. ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è —Ñ–æ—Ç–æ
4. ‚úÖ –ö–Ω–æ–ø–∫–∏ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã (–Ω–µ —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è)
5. ‚úÖ –°—á–µ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (1/3, 2/3, 3/3)
```

---

## üöÄ Performance Tips

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã:
1. ‚úÖ `loading="lazy"` –Ω–∞ img –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
2. ‚úÖ useEffect –∑–∞–≤–∏—Å–∏—Ç –æ—Ç `[isOpen, recipe.id]` - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
3. ‚úÖ ref –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ DOM (–Ω–µ—Ç re-renders)
4. ‚úÖ –£—Å–ª–æ–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –ø–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ undefined

### –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:
- üì± –ú–µ–Ω—å—à–µ —Ä–∞–±–æ—Ç—ã –±—Ä–∞—É–∑–µ—Ä—É
- ‚ö° –ü–∞–Ω–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ
- üíæ –ö–∞—Ä—Ç–∏–Ω–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤–∏–¥–Ω—ã
- üî• –ù–µ—Ç –ª–∏—à–Ω–∏—Ö re-renders

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚ùå –°–∫—Ä–æ–ª–ª –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è
‚ùå –§–æ—Ç–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è
‚ùå –ö—Ä–∞—à–∏—Ç—Å—è –ø—Ä–∏ undefined
‚ùå –û—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚úÖ –°–∫—Ä–æ–ª–ª –≤—Å–µ–≥–¥–∞ –≤–≤–µ—Ä—Ö—É
‚úÖ –§–æ—Ç–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–µ
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç undefined
‚úÖ –ß–∏—Å—Ç–∞—è –∫–æ–Ω—Å–æ–ª—å
‚úÖ –ü–ª–∞–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –º–µ–∂–¥—É —Ä–µ—Ü–µ–ø—Ç–∞–º–∏
```

---

**–ì–æ—Ç–æ–≤–æ! –ü–∞–Ω–µ–ª—å —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ** üéâ
