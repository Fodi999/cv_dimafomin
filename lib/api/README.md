# API Module Structure

## üìÇ –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–¥–æ 26.12.2025)
```
lib/
‚îî‚îÄ‚îÄ api.ts (1557 —Å—Ç—Ä–æ–∫ - –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª)
```

## üìÇ –ù–æ–≤–∞—è –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
lib/
‚îú‚îÄ‚îÄ api.ts (–≥–ª–∞–≤–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç, 78 —Å—Ç—Ä–æ–∫)
‚îî‚îÄ‚îÄ api/
    ‚îú‚îÄ‚îÄ base.ts          (apiFetch, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã)
    ‚îú‚îÄ‚îÄ auth.ts          (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω)
    ‚îú‚îÄ‚îÄ academy.ts       (–∫—É—Ä—Å—ã, –ø—Ä–æ—Ñ–∏–ª—å, –ª–∏–¥–µ—Ä–±–æ—Ä–¥)
    ‚îú‚îÄ‚îÄ marketplace.ts   (–º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å —Ä–µ—Ü–µ–ø—Ç–æ–≤)
    ‚îú‚îÄ‚îÄ ai.ts            (AI —Ñ—É–Ω–∫—Ü–∏–∏, —á–∞—Ç)
    ‚îú‚îÄ‚îÄ upload.ts        (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
    ‚îú‚îÄ‚îÄ wallet.ts        (ChefTokens)
    ‚îú‚îÄ‚îÄ tasks.ts         (–∑–∞–¥–∞–Ω–∏—è)
    ‚îú‚îÄ‚îÄ fridge.ts        (—Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫)
    ‚îú‚îÄ‚îÄ user.ts          (–ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
    ‚îú‚îÄ‚îÄ admin.ts         (–∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å)
    ‚îú‚îÄ‚îÄ contact.ts       (–∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞)
    ‚îú‚îÄ‚îÄ health.ts        (health check)
    ‚îî‚îÄ‚îÄ recipe-matching.ts (–ø–æ–¥–±–æ—Ä —Ä–µ—Ü–µ–ø—Ç–æ–≤, AI recommendations)
```

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### 1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**
- –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
- –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π API –º–µ—Ç–æ–¥
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 2. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤**
- `base.ts`: ~100 —Å—Ç—Ä–æ–∫
- `auth.ts`: ~50 —Å—Ç—Ä–æ–∫
- `fridge.ts`: ~300 —Å—Ç—Ä–æ–∫
- `user.ts`: ~250 —Å—Ç—Ä–æ–∫
- –û—Å—Ç–∞–ª—å–Ω—ã–µ: 50-150 —Å—Ç—Ä–æ–∫

### 3. **Backwards Compatibility**
–°—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```typescript
// ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
import api from '@/lib/api';
api.auth.login(email, password);
api.fridge.getItems(token);
```

### 4. **–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**
–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–µ:
```typescript
// –ò–º–ø–æ—Ä—Ç —Ç–æ–ª—å–∫–æ auth –º–æ–¥—É–ª—è
import { authApi } from '@/lib/api';
authApi.login(email, password);

// –ò–º–ø–æ—Ä—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–æ–¥—É–ª–µ–π
import { authApi, fridgeApi, userApi } from '@/lib/api';

// –¢–∏–ø—ã —Ç–æ–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã
import type { RecipeMatch, AIRecommendationResult } from '@/lib/api';
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è—Ç—å
–ö–æ–¥ –æ—Å—Ç–∞—ë—Ç—Å—è —Ä–∞–±–æ—á–∏–º:
```typescript
import api from '@/lib/api';
api.auth.login(email, password);
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
```typescript
// –ë—ã–ª–æ
import api from '@/lib/api';
const data = await api.fridge.getItems(token);

// –°—Ç–∞–ª–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
import { fridgeApi } from '@/lib/api';
const data = await fridgeApi.getItems(token);
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–æ–¥—É–ª—å | –°—Ç—Ä–æ–∫–∏ | –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã |
|--------|--------|-----------|
| auth | 50 | 4 |
| academy | 90 | 10 |
| marketplace | 60 | 5 |
| ai | 80 | 7 |
| fridge | 300 | 10 |
| user | 250 | 11 |
| admin | 180 | 20 |
| recipe-matching | 220 | 3 |
| –û—Å—Ç–∞–ª—å–Ω—ã–µ | ~200 | ~20 |
| **–ò—Ç–æ–≥–æ** | **~1500** | **~90** |

## üó∫Ô∏è –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Backend API

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏–∑ backend –ø–æ–∫—Ä—ã—Ç—ã:

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- Auth: `/api/auth/*`
- User: `/api/user/*`
- Fridge: `/api/fridge/*`, `/api/catalog/ingredients/*`
- Recipes: `/api/recipes/*`
- AI: `/api/ai/*`
- Tasks: `/api/tasks/*`, `/api/user/tasks/*`, `/api/admin/tasks/*`
- Admin: `/api/admin/*`
- Marketplace: `/api/marketplace/*`
- Academy: `/api/academy/*`
- Wallet: `/api/token-bank/*`

### ‚ö†Ô∏è Stubbed (–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã)
- `/api/auth/logout` - TODO –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
- `/api/auth/me` - TODO –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª** (–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):
   ```bash
   rm lib/api-old.ts
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è

3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** API –º–µ—Ç–æ–¥–æ–≤ (JSDoc)

4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** —Ç–∏–ø–æ–≤ –∏–∑ OpenAPI spec

## üìù Changelog

### 26.12.2025 - –ú–æ–¥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ –†–∞–∑–¥–µ–ª—ë–Ω –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π `api.ts` (1557 —Å—Ç—Ä–æ–∫) –Ω–∞ 14 –º–æ–¥—É–ª–µ–π
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç—ã
- ‚úÖ –í—Å–µ TypeScript –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ –ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

