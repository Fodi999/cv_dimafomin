# üì¶ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (localStorage)

## üö® –ü—Ä–æ–±–ª–µ–º–∞

**QuotaExceededError**: localStorage –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å —Ñ–æ—Ç–æ

### –ü—Ä–∏—á–∏–Ω—ã:
- üñºÔ∏è **–§–æ—Ç–æ –≤ base64** (–∫–∞–∂–¥–æ–µ —Ñ–æ—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å 100KB-1MB)
- üìÖ **–ü–æ–ª–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã Date** —Å –º–µ—Ç–æ–¥–∞–º–∏ (–Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è)
- üìù **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- üß† **–õ–∏–º–∏—Ç –±—Ä–∞—É–∑–µ—Ä–∞**: –æ–±—ã—á–Ω–æ 5-10MB –Ω–∞ –¥–æ–º–µ–Ω

### –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–∑–º–µ—Ä–æ–≤:
```
- 1 —Ä–µ—Ü–µ–ø—Ç –±–µ–∑ —Ñ–æ—Ç–æ: ~1KB ‚úÖ
- 1 —Ä–µ—Ü–µ–ø—Ç —Å 2 —Ñ–æ—Ç–æ (base64): ~200KB ‚ùå
- 10 —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å —Ñ–æ—Ç–æ: >2MB ‚ùå‚ùå
- localStorage –ª–∏–º–∏—Ç: ~5-10MB üí•
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–æ—Ç–æ –≤ localStorage

```tsx
// ‚ùå –î–û: –°–æ—Ö—Ä–∞–Ω—è–ª–∏ –≤—Å—ë
localStorage.setItem("recipes", JSON.stringify(recipes));

// ‚úÖ –ü–û–°–õ–ï: –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç, –±–µ–∑ —Ñ–æ—Ç–æ
const recipesToSave = recipes.map(recipe => ({
  ...recipe,
  images: [], // üéØ –ü—É—Å—Ç–æ!
  createdAt: recipe.createdAt.toISOString(),
  updatedAt: recipe.updatedAt.toISOString(),
}));
localStorage.setItem("recipes", JSON.stringify(recipesToSave));
```

### 2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –¥–∞—Ç—ã –≤ ISO —Å—Ç—Ä–æ–∫–∏

```tsx
// ‚ùå –î–û: Date –æ–±—ä–µ–∫—Ç—ã (–º–Ω–æ–≥–æ –º–µ—Ç–æ–¥–æ–≤)
createdAt: new Date()  // size ~500 bytes (—Å –º–µ—Ç–æ–¥–∞–º–∏)

// ‚úÖ –ü–û–°–õ–ï: ISO —Å—Ç—Ä–æ–∫–∏ (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç)
createdAt: new Date().toISOString()  // "2025-11-17T10:30:00.000Z" size ~24 bytes
```

### 3. –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ

```tsx
const recipesWithDates = parsedRecipes.map(recipe => ({
  ...recipe,
  createdAt: new Date(recipe.createdAt),
  updatedAt: new Date(recipe.updatedAt),
}));
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
```
10 —Ä–µ—Ü–µ–ø—Ç–æ–≤ √ó 100KB —Ñ–æ—Ç–æ = 1MB ‚ùå
+ 50KB —Ç–µ–∫—Å—Ç = 1.05MB
localStorage: 5-10MB
‚úó –í–ª–µ–∑–µ—Ç —Ç–æ–ª—å–∫–æ 5-10 —Ä–µ—Ü–µ–ø—Ç–æ–≤ –º–∞–∫—Å–∏–º—É–º
```

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
```
10 —Ä–µ—Ü–µ–ø—Ç–æ–≤ (–±–µ–∑ —Ñ–æ—Ç–æ):
  - –ö–∞–∂–¥—ã–π —Ä–µ—Ü–µ–ø—Ç: ~1KB (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç)
  - 10 —Ä–µ—Ü–µ–ø—Ç–æ–≤: ~10KB
  - –§–æ—Ç–æ –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (–Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è)
‚úÖ –ú–æ–∂–µ—Ç –±—ã—Ç—å 500+ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ localStorage
```

---

## üéØ –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ ‚Üí —Ö—Ä–∞–Ω–∏–º –≤ RAM
2. –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å" ‚Üí handleCreateRecipe()
3. –°–æ–∑–¥–∞—ë–º Recipe –æ–±—ä–µ–∫—Ç —Å —Ñ–æ—Ç–æ –≤ –ø–∞–º—è—Ç–∏
4. setRecipes(recipes) ‚Üí RAM –ø–∞–º—è—Ç–∏
5. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:
   - –£–¥–∞–ª—è–µ–º —Ñ–æ—Ç–æ: images = []
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –¥–∞—Ç—ã –≤ ISO strings
6. localStorage.setItem() ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
7. UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ—Ü–µ–ø—Ç —Å —Ñ–æ—Ç–æ –∏–∑ RAM –ø–∞–º—è—Ç–∏
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```
1. –ë—Ä–∞—É–∑–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç page.tsx
2. useEffect –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
3. localStorage.getItem("recipes") ‚Üí JSON string
4. JSON.parse() ‚Üí –û–±—ä–µ–∫—Ç—ã —Ä–µ—Ü–µ–ø—Ç–æ–≤ (–±–µ–∑ —Ñ–æ—Ç–æ, –¥–∞—Ç—ã –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏)
5. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –¥–∞—Ç—ã: new Date(recipe.createdAt)
6. setRecipes(recipes) ‚Üí RAM –ø–∞–º—è—Ç–∏
7. –§–æ—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–æ –Ω–æ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
```

---

## üíæ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –í localStorage:
```json
[
  {
    "id": "1731849600000",
    "name": "–°—É—à—ñ –†–∞–π–Ω–±–æ—É",
    "description": "–ö–æ–ª—å–æ—Ä–æ–≤—ñ —Å—É—à—ñ –∑ –ª–æ—Å–æ—Å–µ–º, —Ç—É–Ω—Ü–µ–º —Ç–∞ –∞–≤–æ–∫–∞–¥–æ",
    "image": "üç£",
    "cuisine": "–Ø–ø–æ–Ω—Å—å–∫–∞",
    "difficulty": "hard",
    "prepTime": 30,
    "cookTime": 0,
    "servings": 4,
    "calories": 250,
    "price": 45,
    "rating": 4.8,
    "reviews": 127,
    "status": "published",
    "author": "Chef Dmitro",
    "tags": ["—Å—É—à—ñ", "–º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∏"],
    "views": 3240,
    "purchases": 89,
    "revenue": 4005,
    "createdAt": "2025-11-17T10:30:00.000Z",
    "updatedAt": "2025-11-17T10:35:00.000Z",
    "ingredients": [
      { "name": "–†–∏—Å –¥–ª—è —Å—É—à—ñ", "quantity": 300, "unit": "–≥" },
      { "name": "–õ–æ—Å–æ—Å—å", "quantity": 150, "unit": "–≥" }
    ],
    "instructions": [
      "–ü—Ä–∏–≥–æ—Ç—É–π—Ç–µ —Ä–∏—Å –¥–ª—è —Å—É—à—ñ —Ç–∞ –¥–∞–π—Ç–µ –π–æ–º—É –æ—Ö–æ–ª–æ–¥–∏—Ç–∏—Å—è",
      "–ù–∞—Ä—ñ–∑–∞–Ω—å—Ç–µ —Ä–∏–±—É —Ç–∞ –∞–≤–æ–∫–∞–¥–æ –Ω–∞ —Å–º—É–≥–∏"
    ],
    "youtubeUrl": "https://www.youtube.com/watch?v=nKDFZ5lx2oU",
    "images": []  // ‚Üê –ü—É—Å—Ç–æ!
  }
]
```

**–†–∞–∑–º–µ—Ä**: ~1KB –Ω–∞ —Ä–µ—Ü–µ–ø—Ç (–≤–º–µ—Å—Ç–æ 100KB+ —Å —Ñ–æ—Ç–æ)

---

## üõ°Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```tsx
try {
  localStorage.setItem("recipes", JSON.stringify(recipesToSave));
  console.log("‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–æ");
} catch (error) {
  if (error instanceof QuotaExceededError) {
    console.error("localStorage –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω!");
    // –û–ø—Ü–∏—è 1: –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Ä–µ—Ü–µ–ø—Ç–æ–≤
    const limitedRecipes = recipesToSave.slice(0, 5);
    localStorage.setItem("recipes", JSON.stringify(limitedRecipes));
  }
}
```

---

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: IndexedDB (–ª—É—á—à–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö)
```tsx
// 100MB+ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
const db = new IDBDatabase("recipes");
db.add("recipe", { id, name, images, ... });
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Cloud Storage (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
```tsx
// –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ–æ—Ç–æ –Ω–∞ Cloudinary/S3
const imageUrl = await uploadToCloud(imageData);
// –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É (200 bytes)
{ ..., images: [imageUrl] }
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
```
RAM: —Ñ–æ—Ç–æ + —Ç–µ–∫—Å—Ç (–±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø)
localStorage: —Ç–µ–∫—Å—Ç —Ç–æ–ª—å–∫–æ (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
Cloud: —Ñ–æ—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ (–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å)
```

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- ‚úÖ –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º `images` –≤ localStorage
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º Date ‚Üí ISO string
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º ISO string ‚Üí Date –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ QuotaExceededError
- ‚úÖ –§–æ—Ç–æ –æ—Å—Ç–∞—é—Ç—Å—è –≤ RAM (–Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è)
- ‚úÖ –†–µ—Ü–µ–ø—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Å–µ–∞–Ω—Å–∞–º–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è 500+ —Ä–µ—Ü–µ–ø—Ç–æ–≤

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞

```javascript
// –í DevTools Console:

// –°–∫–æ–ª—å–∫–æ –∑–∞–Ω–∏–º–∞–µ—Ç localStorage:
const size = new Blob([JSON.stringify(localStorage)]).size;
console.log(`localStorage: ${(size / 1024).toFixed(2)} KB`);

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã:
const recipes = JSON.parse(localStorage.getItem("recipes"));
console.log(`–í—Å—å–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç—ñ–≤: ${recipes.length}`);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç:
console.log(recipes[0]);
```

---

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: üéâ –†–µ—Ü–µ–ø—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ, –±–µ–∑ –æ—à–∏–±–æ–∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è!
