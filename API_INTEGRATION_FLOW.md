# ๐ API ะะะขะะะะะฆะะฏ - ะะะขะะ ะะะะะซะฅ ะะะะะฃ ะะะะะะะะะ

## ๐ก ะะะะะะซะ API ENDPOINTS

### **1. ะะะะคะะะฌ (`/profile`)**
```
GET /user/profile
  โโ ะะพะทะฒัะฐัะฐะตั: { name, email, avatar, bio, location, xp, level, balance }

PUT /user/profile
  โโ ะัะฟัะฐะฒะปัะตั: { name, bio, location }
  โโ ะะฑะฝะพะฒะปัะตั ะดะฐะฝะฝัะต ะฒ ะะ

POST /user/avatar
  โโ ะัะฟัะฐะฒะปัะตั: FormData ั ัะฐะนะปะพะผ
  โโ ะะพะทะฒัะฐัะฐะตั: { avatarUrl }

GET /wallet/balance
  โโ ะะพะทะฒัะฐัะฐะตั: { balance: 1250, earned: 5000, spent: 3750 }
  โโ ะะพะบะฐะทัะฒะฐะตั ัะตะบััะธะต ัะพะบะตะฝั

GET /wallet/transactions
  โโ ะะพะทะฒัะฐัะฐะตั: [{ type, amount, reason, date }, ...]
  โโ ะััะพัะธั ะพะฟะตัะฐัะธะน (ะบัััั, ะฟะพะบัะฟะบะธ, AI-ะฟะพะผะพัั)

GET /user/health
  โโ ะะพะทะฒัะฐัะฐะตั: { age, weight, height, dailyCalories, allergies, dietaryRestrictions }

PUT /user/health
  โโ ะัะฟัะฐะฒะปัะตั: { age, weight, height, dailyCalories, allergies, dietaryRestrictions }
  โโ ะะฑะฝะพะฒะปัะตั ะฟัะพัะธะปั ะทะดะพัะพะฒัั
```

---

### **2. ะะะะะะะะฏ (`/academy`)**
```
GET /academy/courses
  โโ ะะพะทะฒัะฐัะฐะตั: [{ id, name, level, price, rating, duration }, ...]
  โโ ะกะฟะธัะพะบ ะฒัะตั ะบัััะพะฒ

GET /academy/courses/:id
  โโ ะะพะทะฒัะฐัะฐะตั: { id, name, description, modules, videos, assignments }
  โโ ะะตัะฐะปะธ ะพะดะฝะพะณะพ ะบัััะฐ

GET /academy/my-courses
  โโ ะะพะทะฒัะฐัะฐะตั: [{ courseId, progress, completed, startedAt }, ...]
  โโ ะะฐะบะธะต ะบัััั ะฟะพะปัะทะพะฒะฐัะตะปั ะฟัะพะนะดะตะฝััะปั

POST /academy/complete-course/:id
  โโ ะัะฟัะฐะฒะปัะตั: { userId, courseId }
  โโ ะะพะทะฒัะฐัะฐะตั: { xp: +500, tokens: +1000, newLevel: 6 }
  โโ ะะฐะฒะตััะธัั ะบััั โ ะฟะพะปััะธัั ะฝะฐะณัะฐะดั
  โโ ะขะฐะบะถะต ะฒัะทัะฒะฐะตั: PUT /wallet/balance (ะพะฑะฝะพะฒะธัั ะฑะฐะปะฐะฝั)
  โโ ะขะฐะบะถะต ะฒัะทัะฒะฐะตั: PUT /user/xp (ะพะฑะฝะพะฒะธัั XP/ััะพะฒะตะฝั)

GET /academy/leaderboard
  โโ ะะพะทะฒัะฐัะฐะตั: [{ userId, name, avatar, xp, position }, ...]

GET /academy/certificates/:id
  โโ ะกะบะฐัะฐัั ัะตััะธัะธะบะฐั (PDF)
```

---

### **3. ะะะะะะข (`/market`)**
```
GET /market/recipes
  โโ ะะฐัะฐะผะตััั: { search, author, price_min, price_max, rating_min }
  โโ ะะพะทะฒัะฐัะฐะตั: [{ id, name, author, price, rating, image }, ...]
  โโ ะะฐัะฐะปะพะณ ัะตัะตะฟัะพะฒ

GET /market/recipes/:id
  โโ ะะพะทะฒัะฐัะฐะตั: { id, name, ingredients, steps, pairing, price, author, reviews }
  โโ ะะตัะฐะปะธ ัะตัะตะฟัะฐ

POST /market/purchase/:recipeId
  โโ ะัะฟัะฐะฒะปัะตั: { userId, recipeId }
  โโ ะัะพะฒะตััะตั ะฑะฐะปะฐะฝั
  โโ ะัะทัะฒะฐะตั: PUT /wallet/deduct-tokens (ัะฟะธัะฐัั ัะพะบะตะฝั)
  โโ ะัะทัะฒะฐะตั: POST /user/add-recipe (ะดะพะฑะฐะฒะธัั ะฒ ะผะพะธ ัะตัะตะฟัั)
  โโ ะะพะทะฒัะฐัะฐะตั: { success, recipe, newBalance }

GET /user/my-recipes
  โโ ะะพะทะฒัะฐัะฐะตั: [{ id, name, ingredients, steps, savedAt }, ...]

POST /market/create-recipe (ะดะปั ะฐะฒัะพัะพะฒ)
  โโ ะัะฟัะฐะฒะปัะตั: { name, ingredients, steps, pairing, price, image }
  โโ ะกะพะทะดะฐัั ะฐะฒัะพััะบะธะน ัะตัะตะฟั (ะฒะพะทะฒัะฐัะฐะตั ะฟัะพัะตะฝั ะดะพัะพะดะฐ)

GET /market/my-sales
  โโ ะะปั ะฐะฒัะพัะพะฒ: ะดะพัะพะด ะพั ะฟัะพะดะฐะถ
  โโ ะะพะทะฒัะฐัะฐะตั: [{ recipeId, purchasers, totalTokensEarned }, ...]
```

---

### **4. ะงะะข (AI) (`/chat`)**
```
POST /chat/message
  โโ ะัะฟัะฐะฒะปัะตั: { userId, message, type: "text" | "image" | "recipe-request" }
  โโ ะัะทัะฒะฐะตั OpenAI API (ะฝะฐ ะฑะตะบะตะฝะดะต)
  โโ ะััะธัะปัะตั ััะพะธะผะพััั (ะทะฐะฒะธัะธั ะพั ัะธะฟะฐ)
  โโ ะัะทัะฒะฐะตั: PUT /wallet/deduct-tokens (ัะฟะธัะฐัั)
  โโ ะกะพััะฐะฝัะตั ะธััะพัะธั
  โโ ะะพะทะฒัะฐัะฐะตั: { response, costTokens, remainingBalance }

POST /chat/analyze-image
  โโ ะัะฟัะฐะฒะปัะตั: { userId, image }
  โโ ะกัะพะธะผะพััั: -15 ัะพะบะตะฝะพะฒ
  โโ ะะพะทะฒัะฐัะฐะตั: { analysis: { presentation, texture, color, technique, suggestions } }
  โโ ะัะทัะฒะฐะตั: PUT /wallet/deduct-tokens (-15)

POST /chat/generate-recipe
  โโ ะัะฟัะฐะฒะปัะตั: { userId, ingredients: ["ะปะพัะพัั", "ะฐะฒะพะบะฐะดะพ", "ะบัะฝะถัั"] }
  โโ ะกัะพะธะผะพััั: -20 ัะพะบะตะฝะพะฒ
  โโ ะะพะทะฒัะฐัะฐะตั: { recipe: { name, ingredients, steps, pairing, calories } }
  โโ ะัะทัะฒะฐะตั: PUT /wallet/deduct-tokens (-20)

GET /chat/history
  โโ ะะพะทะฒัะฐัะฐะตั: [{ id, message, response, costTokens, timestamp }, ...]
  โโ ะััะพัะธั ะฒัะตั ะฒะพะฟัะพัะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั

GET /chat/recommendations
  โโ ะะฐัะฐะผะตััั: { context: "cooking" | "course" | "health" }
  โโ ะะพะทะฒัะฐัะฐะตั: [{ type, id, name, link }, ...]
  โโ AI ัะตะบะพะผะตะฝะดัะตั ะบัััั, ัะตัะตะฟัั, ะฒะธะดะตะพ
```

---

### **5. ะฅะะะะะะะฌะะะ (`/fridge`)**
```
GET /fridge/ingredients
  โโ ะะพะทะฒัะฐัะฐะตั: [{ id, name, quantity, unit, expiryDate, calories }, ...]
  โโ ะะพะน ัะฟะธัะพะบ ะธะฝะณัะตะดะธะตะฝัะพะฒ

POST /fridge/add-ingredient
  โโ ะัะฟัะฐะฒะปัะตั: { name, quantity, unit, expiryDate }
  โโ ะะพะฑะฐะฒะธัั ะธะฝะณัะตะดะธะตะฝั

DELETE /fridge/ingredient/:id
  โโ ะฃะดะฐะปะธัั ะธะฝะณัะตะดะธะตะฝั

POST /fridge/what-to-cook
  โโ ะัะฟัะฐะฒะปัะตั: { userId, ingredientIds: [...] }
  โโ ะัะทัะฒะฐะตั Chat API ะดะปั ัะตะบะพะผะตะฝะดะฐัะธะน
  โโ ะะพะทะฒัะฐัะฐะตั: [{ recipeId, name, matchPercentage }, ...]
  โโ ะะตัะตะฟัั, ะบะพัะพััะต ะผะพะถะฝะพ ะณะพัะพะฒะธัั

GET /fridge/daily-calories
  โโ ะััะธัะปัะตั: ััะผะผะฐ ะบะฐะปะพัะธะน ะธะท ะดะพะฑะฐะฒะปะตะฝะฝัั ะธะฝะณัะตะดะธะตะฝัะพะฒ
  โโ ะกัะฐะฒะฝะธะฒะฐะตั ั ะดะฝะตะฒะฝะพะน ะฝะพัะผะพะน ะธะท ะฟัะพัะธะปั ะทะดะพัะพะฒัั
  โโ ะะพะทะฒัะฐัะฐะตั: { consumed, limit, remaining, percentage }
```

---

## ๐ ะะะะะะะซ ะะะขะะะะ ะะะะะซะฅ

### **ะะะะะะ 1: ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะฒะตััะฐะตั ะบััั**

```
ะคะะะะขะะะ (Academy page):
  โโ ะะฐะถะธะผะฐะตั [ะะฐะฒะตััะธัั ะบััั]

ะะะะะะ:
  1. POST /academy/complete-course/:id
     โโ ะัะพะฒะตััะตั: course completed
     โโ ะััะธัะปัะตั: xp = +500, tokens = +1000
     โโ ะัะทัะฒะฐะตั: PUT /wallet/balance (ะดะพะฑะฐะฒะธัั 1000)
     โโ ะัะทัะฒะฐะตั: PUT /user/xp (ะดะพะฑะฐะฒะธัั 500 XP)
     โโ ะััะธัะปัะตั ะฝะพะฒัะน ััะพะฒะตะฝั (ะตัะปะธ 5000+ XP)
     โโ ะะตะฝะตัะธััะตั ัะตััะธัะธะบะฐั (PDF)
     โโ ะะพะทะฒัะฐัะฐะตั: { success, newBalance: 1250, newXP: 2450, newLevel: 5 }

ะคะะะะขะะะ:
  โโ ะะพะบะฐะทัะฒะฐะตั notification: "๐ +1000 ChefTokens!"
  โโ ะะฑะฝะพะฒะปัะตั ะฟัะพัะธะปั: balance, xp, level
  โโ ะะฑะฝะพะฒะปัะตั ะปะธะดะตัะฑะพัะด
  โโ ะัะตะดะปะฐะณะฐะตั: "ะกะบะฐัะฐัั ัะตััะธัะธะบะฐั" ะธะปะธ "ะกะปะตะดัััะธะน ะบััั"
```

---

### **ะะะะะะ 2: ะะพะปัะทะพะฒะฐัะตะปั ัะฟัะฐัะธะฒะฐะตั ั AI ั ัะพัะพ**

```
ะคะะะะขะะะ (Chat page):
  โโ ะะฐะณััะถะฐะตั ัะพัะพ ะฑะปัะดะฐ
  โโ ะัะฟัะฐะฒะปัะตั: "ะัะตะฝะธ ะผะพะต ะฑะปัะดะพ"

ะะะะะะ:
  1. POST /chat/analyze-image
     โโ ะะฐะณััะถะฐะตั ะธะทะพะฑัะฐะถะตะฝะธะต ะฝะฐ ัะตัะฒะตั (ะธะปะธ S3)
     โโ ะัะฟัะฐะฒะปัะตั ะฝะฐ OpenAI Vision API
     โโ ะะพะปััะฐะตั ะฐะฝะฐะปะธะท: { presentation: 8/10, texture: 7/10, ... }
     โโ ะััะธัะปัะตั ััะพะธะผะพััั: -15 ัะพะบะตะฝะพะฒ
     โโ ะัะพะฒะตััะตั ะฑะฐะปะฐะฝั ะฟะพะปัะทะพะฒะฐัะตะปั (ะดะพะปะถะฝะพ ะฑััั >= 15)
     โโ ะัะปะธ ะฝะตะดะพััะฐัะพัะฝะพ: ะฒะพะทะฒัะฐัะฐะตั { error: "Not enough tokens" }
     โโ ะัะปะธ ะดะพััะฐัะพัะฝะพ:
     โ  โโ ะัะทัะฒะฐะตั: PUT /wallet/deduct-tokens (-15)
     โ  โโ ะกะพััะฐะฝัะตั: POST /chat/history (history entry)
     โ  โโ ะะพะทะฒัะฐัะฐะตั ะฐะฝะฐะปะธะท
     โโ ะะพะทะฒัะฐัะฐะตั: { analysis, newBalance: 1235 }

ะคะะะะขะะะ:
  โโ ะะพะบะฐะทัะฒะฐะตั: ะฐะฝะฐะปะธะท AI ั ะฟัะตะดะปะพะถะตะฝะธัะผะธ
  โโ ะะฑะฝะพะฒะปัะตั ะฑะฐะปะฐะฝั ะฒ ะฟะฐะฝะตะปะธ (1235 ัะพะบะตะฝะพะฒ)
  โโ ะัะตะดะปะฐะณะฐะตั: [ะะตะฝะตัะธัะพะฒะฐัั ัะตัะตะฟั] ะธะปะธ [ะกะฟัะพัะธัั ะตัะต]
  โโ ะกะพััะฐะฝัะตั ะฒ ะธััะพัะธั ัะฐัะฐ
```

---

### **ะะะะะะ 3: ะะพะปัะทะพะฒะฐัะตะปั ะฟะพะบัะฟะฐะตั ัะตัะตะฟั**

```
ะคะะะะขะะะ (Market page):
  โโ ะัะฑะธัะฐะตั ัะตัะตะฟั "ะกััะธ Rainbow" (ัะตะฝะฐ: 50 ัะพะบะตะฝะพะฒ)
  โโ ะะฐะถะธะผะฐะตั [ะัะฟะธัั]

ะะะะะะ:
  1. POST /market/purchase/:recipeId
     โโ ะัะพะฒะตััะตั ะฑะฐะปะฐะฝั (ะดะพะปะถะฝะพ ะฑััั >= 50)
     โโ ะัะปะธ ะฝะตะดะพััะฐัะพัะฝะพ: error
     โโ ะัะปะธ ะดะพััะฐัะพัะฝะพ:
     โ  โโ ะัะทัะฒะฐะตั: PUT /wallet/deduct-tokens (-50) 
     โ  โโ ะัะทัะฒะฐะตั: POST /user/add-recipe (ะดะพะฑะฐะฒะธัั ะฒ "ะะพะธ ัะตัะตะฟัั")
     โ  โโ ะัะทัะฒะฐะตั: PUT /wallet/add-tokens (ะดะปั ะฐะฒัะพัะฐ +50)
     โ  โโ ะะฐะฟะธััะฒะฐะตั: transaction history
     โ  โโ ะะพะทะฒัะฐัะฐะตั: { success, recipe, newBalance: 1185 }

ะคะะะะขะะะ:
  โโ ะะพะบะฐะทัะฒะฐะตั: "โ ะะตัะตะฟั ะบัะฟะปะตะฝ!"
  โโ ะะฑะฝะพะฒะปัะตั ะฑะฐะปะฐะฝั (1185)
  โโ ะะพะฑะฐะฒะปัะตั ัะตัะตะฟั ะฒ "ะะพะธ ัะตัะตะฟัั"
  โโ ะะพะบะฐะทัะฒะฐะตั ะบะฝะพะฟะบะธ: [ะะพะฑะฐะฒะธัั ะฒ ัะพะปะพะดะธะปัะฝะธะบ] [ะะฐัะฐัั ะณะพัะพะฒะธัั]
  โโ ะััะพัะธั ะฟะพะบัะฟะพะบ ะฒ ะฟัะพัะธะปะต ะพะฑะฝะพะฒะปัะตััั
```

---

### **ะะะะะะ 4: ะะฝัะตะณัะฐัะธั ัะพะปะพะดะธะปัะฝะธะบะฐ + AI + ะผะฐัะบะตัะฐ**

```
ะคะะะะขะะะ (Fridge page):
  โโ ะะพะปัะทะพะฒะฐัะตะปั ะดะพะฑะฐะฒะปัะตั: "ะะพัะพัั", "ะะฒะพะบะฐะดะพ", "ะัะฝะถัั"
  โโ ะะฐะถะธะผะฐะตั: "ะงัะพ ะณะพัะพะฒะธัั?"

ะะะะะะ:
  1. POST /fridge/what-to-cook
     โโ ะะตัะตั ัะฟะธัะพะบ ะธะฝะณัะตะดะธะตะฝัะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั
     โโ ะัะฟัะฐะฒะปัะตั ะฝะฐ AI (Chat API)
     โ  "ะงัะพ ะณะพัะพะฒะธัั ะธะท: ะปะพัะพัั, ะฐะฒะพะบะฐะดะพ, ะบัะฝะถัั?"
     โโ AI ะณะตะฝะตัะธััะตั ัะฟะธัะพะบ ัะตัะตะฟัะพะฒ
     โโ ะะปั ะบะฐะถะดะพะณะพ ัะตัะตะฟัะฐ ะธัะตั ะฒ ะะ (Market)
     โโ ะะพะทะฒัะฐัะฐะตั: [{ recipeId, name, author, price, match: "98%" }, ...]
     โโ ะััะธัะปัะตั ััะพะธะผะพััั AI: -10 ัะพะบะตะฝะพะฒ

ะคะะะะขะะะ:
  โโ ะะพะบะฐะทัะฒะฐะตั: ัะฟะธัะพะบ ัะตัะตะฟัะพะฒ ะธะท ัะพะปะพะดะธะปัะฝะธะบะฐ
  โโ ะะปั ะบะฐะถะดะพะณะพ: [ะัะฟะธัั] [ะะฐะบ ะณะพัะพะฒะธัั?]
  โโ ะะฐะถะธะผะฐะตั [ะะฐะบ ะณะพัะพะฒะธัั?]
  โ  โโ ะะตัะตัะพะดะธั ะฒ ะงะะข ั ะบะพะฝัะตะบััะพะผ
  โ     โ AI: "ะะฐัะฝะตะผ ะณะพัะพะฒะธัั ัััะธ. ะจะฐะณ 1: ัะตะถั ััะฑั..."
  โโ ะัะปะธ ะฝะฐะถะธะผะฐะตั [ะัะฟะธัั]
     โโ ะะตัะตัะพะดะธั ะฒ ะะะะะะข (ะฟัะธะผะตั 3)
```

---

## ๐งฉ ะะะะะกะะะะกะขะ ะะะะะฃ ENDPOINTS

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ        USER PROFILE DATA            โ
โ  GET /user/profile                  โ
โ  PUT /user/profile                  โ
โ  GET /user/health                   โ
โ  PUT /user/health                   โ
โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโ
               โ
        โโโโโโโโดโโโโโโโฌโโโโโโโโโโฌโโโโโโโโโโโ
        โ             โ         โ          โ
    โโโโโโโโโโโ  โโโโโโโโโโโโ โโโโโโโโโโ โโโโโโโโโ
    โ ACADEMY โ  โ WALLET   โ โ HEALTH โ โ FRIDGEโ
    โ Courses โ  โ Balance  โ โ Caloriesโ โ      โ
    โโโโโโฌโโโโโ  โโโโโโฌโโโโโโ โโโโโโโโโโ โโโโโโโโโ
         โ             โ
         โ    โโโโโโโโโโดโโโโโโโโโโ
         โ    โ                  โ
         โ  โโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ
         โ  โ Complete   โ  โ Deduct       โ
         โโโโ Course     โ  โ Tokens       โ
            โ +XP, +Tok  โ  โ (AI, Market) โ
            โโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ

         โโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ      MARKET            โ
         โ  GET /market/recipes   โ
         โ  POST /market/purchase โ
         โโโโโโโโโโโโโโฌโโโโโโโโโโโโ
                      โ
         โโโโโโโโโโโโโโดโโโโโโโโโโโโโ
         โ                         โ
    โโโโโโโโโโโโ           โโโโโโโโโโโโโโ
    โ Deduct   โ           โ Add Recipe โ
    โ Tokens   โ           โ to My List โ
    โโโโโโโโโโโโ           โโโโโโโโโโโโโโ

    โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
    โ        CHAT (AI)         โ
    โ  POST /chat/message      โ
    โ  POST /chat/analyze      โ
    โ  POST /chat/generate     โ
    โโโโโโโโโโโโฌโโโโโโโโโโโโโโโโ
               โ
         โโโโโโโดโโโโโโ
         โ           โ
    โโโโโโโโโโโ  โโโโโโโโโโโโโ
    โ Deduct  โ  โ Save to   โ
    โ Tokens  โ  โ History   โ
    โโโโโโโโโโโ  โโโโโโโโโโโโโ
```

---

## ๐ ะะะะฏะะะ ะะะะะะะะฆะะ

1. **ะจะะ 1: ะัะพัะธะปั (Profile endpoints)**
   - GET /user/profile โ (ัะธัะฐัั ะดะฐะฝะฝัะต)
   - PUT /user/profile โ (ัะพััะฐะฝััั)
   - GET/PUT /user/health โ (ะทะดะพัะพะฒัะต)

2. **ะจะะ 2: ะะพัะตะปะตะบ (Wallet endpoints)**
   - GET /wallet/balance (ะฟะพะปััะธัั ะฑะฐะปะฐะฝั)
   - GET /wallet/transactions (ะธััะพัะธั)
   - PUT /wallet/deduct-tokens (ัะฟะธัะฐัั)
   - PUT /wallet/add-tokens (ะดะพะฑะฐะฒะธัั)

3. **ะจะะ 3: ะะบะฐะดะตะผะธั (Academy endpoints)**
   - GET /academy/courses (ัะฟะธัะพะบ)
   - GET /academy/my-courses (ะผะพะธ ะบัััั)
   - POST /academy/complete-course (ะทะฐะฒะตััะธัั + ะฝะฐะณัะฐะดั)

4. **ะจะะ 4: ะะฐัะบะตั (Market endpoints)**
   - GET /market/recipes (ะบะฐัะฐะปะพะณ)
   - POST /market/purchase (ะบัะฟะธัั)

5. **ะจะะ 5: ะงะฐั (Chat endpoints)**
   - POST /chat/message (ะฒะพะฟัะพั)
   - POST /chat/analyze-image (ะฐะฝะฐะปะธะท ัะพัะพ)

6. **ะจะะ 6: ะฅะพะปะพะดะธะปัะฝะธะบ (Fridge endpoints)**
   - GET/POST /fridge/ingredients
   - POST /fridge/what-to-cook (ัะตะบะพะผะตะฝะดะฐัะธะธ)
