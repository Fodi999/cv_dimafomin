# Auth 2026 Migration Notes

**–î–∞—Ç–∞**: 2026-01-26

## –í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚úÖ –£–±—Ä–∞–Ω—ã –≤—ã–∑–æ–≤—ã `/api/user/profile`

**UserContext** (`contexts/UserContext.tsx`):
- ‚ùå –°—Ç–∞—Ä—ã–π: `fetchProfile()` –≤—ã–∑—ã–≤–∞–ª `GET /api/user/profile`
- ‚úÖ –ù–æ–≤—ã–π: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `AuthContext.user`
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (name, avatar, level, xp, chefTokens) –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ localStorage cache
- TODO: –í –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π endpoint –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è

**SessionContext** (`contexts/SessionContext.tsx`):
- ‚ö†Ô∏è –í—Å–µ –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/api/user/profile` (—Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
- TODO: –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ UserContext

### ‚úÖ AuthContext - –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã

**–ë–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (id, email, role, status):
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `GET /api/auth/me`
- –•—Ä–∞–Ω—è—Ç—Å—è –≤ `AuthContext.user`
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å–µ–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

**–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** (name, avatar, level, xp, chefTokens):
- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ localStorage cache (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –ú–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ endpoint –≤ –±—É–¥—É—â–µ–º
- –ù–ï –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ `/api/user/profile`

### ‚ö†Ô∏è –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**UserContext** –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:
- `useUser()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç `user` —Å —Ç–µ–º–∏ –∂–µ –ø–æ–ª—è–º–∏
- –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∏–∑ `AuthContext`
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (updateProfile, deductTokens, addTokens) —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

### üìù TODO

1. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å `SessionContext` –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `UserContext`
2. ‚è≥ –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π endpoint –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
3. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å `updateProfile()` —á—Ç–æ–±—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/api/user/profile` (–µ—Å–ª–∏ —ç—Ç–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ)
