# ๐ฝ๏ธ Kitchen Dashboard โ ะคะธะฝะฐะปัะฝะฐั ัะฟะตัะธัะธะบะฐัะธั

**Status:** โ ARCHITECTURE READY FOR TESTING

---

## ๐ ะะพะฝัะตะฟัะธั

Kitchen Dashboard ััะพ **ัะตะฐะปัะฝัะน ะดะฐัะฑะพัะด ะบััะฝะธ ัะตััะพัะฐะฝะฐ**, ะฐ ะฝะต ะบะฐัะฐะปะพะณ ัะตัะตะฟัะพะฒ.

ะะฐะทะดะตะปะตะฝะธะต ะฝะฐ **3 ะทะพะฝั ะพัะฒะตัััะฒะตะฝะฝะพััะธ**:
1. **๐ฝ๏ธ Kitchen Dashboard** โ ะะบัะธะฒะฝะฐั ะทะพะฝะฐ ะณะพัะพะฒะบะธ
2. **๐ ะััะพัะธั** โ ะััะธะฒ ะทะฐะฒะตัััะฝะฝัั ะฑะปัะด ะทะฐ ะดะตะฝั
3. **๐ ะะฐัะฐะปะพะณ** โ ะกะพััะฐะฝัะฝะฝัะต ัะตัะตะฟัั (ะพัะดะตะปัะฝะพ, ะตัะปะธ ะฝัะถะตะฝ)

---

## ๐ฏ ะะพัะพะบ ะฟะพะปัะทะพะฒะฐัะตะปั

### 1๏ธโฃ ะะพะฑะฐะฒะปะตะฝะธะต ะฒ ะผะตะฝั
```
/assistant page
  โ ะะฐะถะธะผะฐะตั โค๏ธ "ะ ะผะตะฝั"
  โ POST /api/user/recipes/save
Backend:
  โ ะกะพะทะดะฐัั MenuItem ั status: "planned"
  โ planned_for: TODAY
  โ created_at: NOW()
Frontend:
  โ Toast: "ะะตัะตะฟั ะดะพะฑะฐะฒะปะตะฝ ะฒ ะผะตะฝั"
  โ ะะฐััะพัะบะฐ ะฟะพัะฒะปัะตััั ะฒ Kitchen Dashboard
  โ ะะฐะทะดะตะป: "ะ ะพัะตัะตะดะธ" (status === "planned")
```

### 2๏ธโฃ ะะฐัะฐะปะพ ะณะพัะพะฒะบะธ
```
Kitchen Dashboard
  โ ะะฐะถะธะผะฐะตั "ะะฐัะฐัั ะณะพัะพะฒะธัั"
  โ onClick={handleStartCooking(itemId)}
  โ POST /api/menu/{id}/start
Backend:
  โ ะะตะฝัะตั status: "cooking"
  โ ะกะพััะฐะฝัะตั started_cooking_at: NOW()
Frontend:
  โ Toast: "ะะฐัะฐะปะธ ะณะพัะพะฒะธัั!"
  โ loadTodayMenu()
  โ ะะฐััะพัะบะฐ ะฟะตัะตะตะทะถะฐะตั ะฒ ัะฐะทะดะตะป "ะะพัะพะฒะธััั"
```

### 3๏ธโฃ ะะฐะฒะตััะตะฝะธะต ะณะพัะพะฒะบะธ
```
Kitchen Dashboard
  โ ะะฐะถะธะผะฐะตั "ะะพัะพะฒะพ!"
  โ onClick={handleCompleteCooking(itemId)}
  โ POST /api/menu/{id}/complete
Backend:
  โ ะะตะฝัะตั status: "completed"
  โ ะกะพััะฐะฝัะตั completed_at: NOW()
Frontend:
  โ Toast: "ะัะปะธัะฝะพ! ะะปัะดะพ ะณะพัะพะฒะพ!"
  โ loadTodayMenu()
  โ ะะฐััะพัะบะฐ ะฟะตัะตะตะทะถะฐะตั ะฒ ัะฐะทะดะตะป "โ ะัะธะณะพัะพะฒะปะตะฝะพ ัะตะณะพะดะฝั"
```

---

## ๐๏ธ ะััะธัะตะบัััะฐ UI

### Kitchen Dashboard (ะะบัะธะฒะฝะฐั ะทะพะฝะฐ)

**ะฃัะปะพะฒะธะต:**
```typescript
if (planned.length === 0 && cooking.length === 0) {
  // ะะพะบะฐะทัะฒะฐะตะผ "ะะฐัะฑะพัะด ะฟััั, ะดะพะฑะฐะฒััะต ัะตัะตะฟัั"
} else {
  // ะะพะบะฐะทัะฒะฐะตะผ ะฟะปะฐะฝะพะฒัะต + ะณะพัะพะฒััะธะตัั
}
```

**ะกัััะบัััะฐ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ        Stats Card (ะฐะบัะธะฒะฝะฐั ะทะพะฝะฐ)       โ
โ  ๐ก ะ ะพัะตัะตะดะธ: 2  ๐ต ะะพัะพะฒะธััั: 1      โ
โ         โ 5 ะทะฐะฒะตััะตะฝะพ ัะตะณะพะดะฝั          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      ๐ก ะ ะพัะตัะตะดะธ (2)                   โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ     โ
โ  โ  ะะพัั        โ  โ  ะกะฐะปะฐั       โ     โ
โ  โ ะะฐัะฐัั ะณะพัะพะฒ.โ  โ ะะฐัะฐัั ะณะพัะพะฒ.โ     โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ต ะะพัะพะฒะธััั (1)  [โฒ]                  โ โ collapsible
โ  โโโโโโโโโโโโโโโโ                        โ
โ  โ  ะกัะฟ         โ                        โ
โ  โ 15:30 โ ะณะพัะพะฒะธะผ                      โ
โ  โ [ะะพัะพะฒะพ!]                             โ
โ  โโโโโโโโโโโโโโโโ                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### ะััะพัะธั (ะะฐะฒะตัััะฝะฝัะต ะฑะปัะดะฐ)

**ะฃัะปะพะฒะธะต:**
```typescript
if (completed.length > 0) {
  // ะะพะบะฐะทัะฒะฐะตะผ ะบะพะปะฐะฟัะธััะตะผัั ะธััะพัะธั
  // ะะพ ัะผะพะปัะฐะฝะธั: collapsed (showHistory: false)
}
```

**ะกัััะบัััะฐ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ ะัะธะณะพัะพะฒะปะตะฝะพ ัะตะณะพะดะฝั (5)  [โผ]        โ โ collapsed by default
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

(ะัะธ ะบะปะธะบะต ัะฐัะบััะฒะฐะตััั)
โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ ะัะธะณะพัะพะฒะปะตะฝะพ ัะตะณะพะดะฝั (5)  [โฒ]        โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ     โ
โ  โ  ะะผะปะตั       โ  โ  ะะฐัะฐ        โ     โ
โ  โ ะะฐะฒะตััะตะฝะพ    โ  โ ะะฐะฒะตััะตะฝะพ    โ     โ
โ  โ 10:15        โ  โ 10:45        โ     โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ     โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ     โ
โ  โ  ะฅะปะตะฑ        โ  โ  ะะฐัะตะฝัะต     โ     โ
โ  โ ะะฐะฒะตััะตะฝะพ    โ  โ ะะฐะฒะตััะตะฝะพ    โ     โ
โ  โ 11:20        โ  โ 11:50        โ     โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ     โ
โ  โโโโโโโโโโโโโโโโ                        โ
โ  โ  ะะพะผะฟะพั      โ                        โ
โ  โ ะะฐะฒะตััะตะฝะพ    โ                        โ
โ  โ 12:10        โ                        โ
โ  โโโโโโโโโโโโโโโโ                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ง ะะพะผะฟะพะฝะตะฝัั ะธ ะธั ะพัะฒะตัััะฒะตะฝะฝะพััั

### MenuRecipeCard.tsx

**ะะดะธะฝ ะบะพะผะฟะพะฝะตะฝั ะดะปั ะฒัะตั 3 ััะฐัััะพะฒ:**

#### Status: `"planned"` ๐ก
```typescript
// ะะตะฝะดะตั
<div>
  <img />
  <h3>ะะตัะตะฟั</h3>
  <select>{1, 2, 3, 4, 5}</select> {/* ะัะฑะพั ะฟะพััะธะน */}
  <button onClick={onUpdateServings}>ะะฑะฝะพะฒะธัั</button>
  <button onClick={onStartCooking}>ะะฐัะฐัั ะณะพัะพะฒะธัั</button>
</div>
```

#### Status: `"cooking"` ๐ต
```typescript
// ะะตะฝะดะตั
<div>
  <img /> {/* animated pulsing border */}
  <h3>ะะตัะตะฟั</h3>
  <p>๐ ะะพัะพะฒะธะผ ั 15:30</p>
  <button onClick={onComplete}>ะะพัะพะฒะพ!</button>
</div>
```

#### Status: `"completed"` โ
```typescript
// ะะตะฝะดะตั (read-only)
<div className="opacity-75">
  <img />
  <h3>ะะตัะตะฟั</h3>
  <p>โ ะะฐะฒะตััะตะฝะพ ะฒ 16:10</p>
  {/* ะะธะบะฐะบะธั ะบะฝะพะฟะพะบ */}
</div>
```

---

## ๐ก API Contract

### ะคัะพะฝั โ Backend

| ะะตะนััะฒะธะต | ะะตัะพะด | Endpoint | ะะถะธะดะฐะตะผัะน ััะฐััั |
|----------|-------|----------|-----------------|
| ะะพะฑะฐะฒะธัั ะฒ ะผะตะฝั | POST | `/api/user/recipes/save` | `planned` |
| ะะฐัะฐัั ะณะพัะพะฒะธัั | POST | `/api/menu/{id}/start` | `cooking` |
| ะะฐะฒะตััะธัั ะณะพัะพะฒะบั | POST | `/api/menu/{id}/complete` | `completed` |
| ะะฑะฝะพะฒะธัั ะฟะพััะธะธ | PATCH | `/api/menu/{id}` | ะฑะตะท ะธะทะผะตะฝะตะฝะธั |
| ะะพะปััะธัั ะผะตะฝั | GET | `/api/menu/today` | MenuItem[] |

### Backend โ Frontend

```json
{
  "id": "menu-item-uuid",
  "status": "planned",           // "planned" | "cooking" | "completed"
  "planned_for": "2026-01-22",
  "created_at": "2026-01-22T10:00:00Z",
  "started_cooking_at": null,    // ะขะพะปัะบะพ ะตัะปะธ status >= "cooking"
  "completed_at": null,          // ะขะพะปัะบะพ ะตัะปะธ status === "completed"
  "servings": 2,
  "recipe": {
    "id": "recipe-uuid",
    "title": "ะะพัั",
    "image_url": "...",
    "cook_time": 45,
    "servings": 2
  }
}
```

---

## ๐งช ะขะตััะพะฒัะน ััะตะฝะฐัะธะน

### ะจะฐะณ 1: ะะพะฑะฐะฒะธัั ัะตัะตะฟั ะฒ ะผะตะฝั
```
1. ะัะบัััั /assistant
2. ะะฐะนัะธ ัะตัะตะฟั (ะฝะฐะฟัะธะผะตั, "ะะฐัะตะฝัะต ัะนัะฐ")
3. ะะฐะถะฐัั โค๏ธ "ะ ะผะตะฝั" ะธะปะธ ะบะฝะพะฟะบั ะดะพะฑะฐะฒะปะตะฝะธั
4. ะัะพะฒะตัะธัั ะบะพะฝัะพะปั:
   โ "โญ Saving recipe to cooking list"
   โ "โ Recipe saved successfully"
```

### ะจะฐะณ 2: ะัะพะฒะตัะธัั ะฟะพัะฒะปะตะฝะธะต ะฒ Kitchen Dashboard
```
1. ะัะบัััั /recipes (Kitchen Dashboard)
2. ะะพะปะถะฝะพ ะฑััั:
   โ Stats: "ะ ะพัะตัะตะดะธ: 1"
   โ ะะฐะทะดะตะป "ะ ะพัะตัะตะดะธ" ั ะบะฐััะพัะบะพะน
   โ ะะฐััะพัะบะฐ ั ะบะฝะพะฟะบะพะน "ะะฐัะฐัั ะณะพัะพะฒะธัั"
   โ ะะพะฝัะพะปั: "๐ [page] Menu items after filtering: { planned: 1, cooking: 0, completed: 0 }"
```

### ะจะฐะณ 3: ะะฐัะฐัั ะณะพัะพะฒะบั
```
1. ะะฐ ะบะฐััะพัะบะต ะฝะฐะถะฐัั "ะะฐัะฐัั ะณะพัะพะฒะธัั"
2. ะัะพะฒะตัะธัั:
   โ Toast: "โ ะะฐัะฐะปะธ ะณะพัะพะฒะธัั!"
   โ ะะฐััะพัะบะฐ ะฟะตัะตะผะตัะฐะตััั ะฒ ัะฐะทะดะตะป "ะะพัะพะฒะธััั"
   โ Stats: "ะ ะพัะตัะตะดะธ: 0, ะะพัะพะฒะธััั: 1"
   โ ะะพะฝัะพะปั: "๐ต Starting to cook item: ..."
```

### ะจะฐะณ 4: ะะฐะฒะตััะธัั ะณะพัะพะฒะบั
```
1. ะะฐ ะบะฐััะพัะบะต ะฝะฐะถะฐัั "ะะพัะพะฒะพ!"
2. ะัะพะฒะตัะธัั:
   โ Toast: "๐ ะัะปะธัะฝะพ! ะะปัะดะพ ะณะพัะพะฒะพ!"
   โ ะะฐััะพัะบะฐ ะฟะตัะตะผะตัะฐะตััั ะฒ ัะฐะทะดะตะป "โ ะัะธะณะพัะพะฒะปะตะฝะพ ัะตะณะพะดะฝั"
   โ Stats: "ะ ะพัะตัะตะดะธ: 0, ะะพัะพะฒะธััั: 0"
   โ ะะพะฝัะพะปั: "โ Completing item: ..."
```

### ะจะฐะณ 5: ะััะพัะธั ัะฒััะฝััะฐ ะฟะพ ัะผะพะปัะฐะฝะธั
```
1. ะะฐ ัััะฐะฝะธัะต /recipes
2. ะัะปะธ ะตััั ะทะฐะฒะตัััะฝะฝัะต:
   โ ะะฐะทะดะตะป "โ ะัะธะณะพัะพะฒะปะตะฝะพ ัะตะณะพะดะฝั" ะฒะธะดะตะฝ
   โ ะะฐััะพัะบะธ ัะบัััั (showHistory: false)
   โ ะะฐะถะฐัั ะฝะฐ ัะฐะทะดะตะป โ ะบะฐััะพัะบะธ ัะฐัะบััะฒะฐัััั
```

---

## ๐ State Management

### ะกะพััะพัะฝะธะต ะบะพะผะฟะพะฝะตะฝัะฐ
```typescript
// app/(user)/recipes/page.tsx

const [menu, setMenu] = useState<TodayMenuItem[]>([]);           // ะะฐะฝะฝัะต ั backend
const [loading, setLoading] = useState(true);                    // ะะฐะณััะทะบะฐ
const [error, setError] = useState<string | null>(null);         // ะัะธะฑะบะธ
const [actionLoading, setActionLoading] = useState<string | null>(null); // ะะพ ะฒัะตะผั ะดะตะนััะฒะธั
const [showCooking, setShowCooking] = useState(true);            // ะะฐะทะดะตะป "ะะพัะพะฒะธััั" 
const [showHistory, setShowHistory] = useState(false);           // ะะฐะทะดะตะป "ะััะพัะธั"
```

### ะคะธะปัััะฐัะธั
```typescript
const planned = menu.filter(i => i.status === "planned");
const cooking = menu.filter(i => i.status === "cooking");
const completed = menu.filter(i => i.status === "completed");
```

### ะะตะฝะดะตั
- **Kitchen Dashboard**: `planned` + `cooking` (ะฒัะตะณะดะฐ ะฒะธะดะฝะพ)
- **ะััะพัะธั**: `completed` (ะบะพะปะปะฐะฟัะธััะตััั, ะฟะพ ัะผะพะปัะฐะฝะธั ัะบัััะฐ)

---

## โ ะงะตะบ-ะปะธัั ะณะพัะพะฒะฝะพััะธ

### Frontend
- [x] menuApi.ts ัะพะทะดะฐะฝ ั 4 ะผะตัะพะดะฐะผะธ
- [x] MenuRecipeCard.tsx ะฟะพะดะดะตัะถะธะฒะฐะตั 3 ััะฐัััะฐ
- [x] /recipes/page.tsx ัะฐะทะดะตะปัะฝ ะฝะฐ Kitchen Dashboard + ะััะพัะธั
- [x] ะัะฐะฒะธะปัะฝัะต ัะธะปัััั (planned, cooking, completed)
- [x] ะัะฐะฒะธะปัะฝะพะต ัะตะฝะดะตัะธะฝะณ (Dashboard = planned+cooking, ะััะพัะธั = completed)
- [x] Toast ัะฒะตะดะพะผะปะตะฝะธั
- [x] ะะฐะณััะทะบะฐ ะผะตะฝั ะฝะฐ mount
- [x] Auto-reload ะฟะพัะปะต ะดะตะนััะฒะธะน

### Backend
- [ ] POST /api/user/recipes/save ัะพะทะดะฐัั status: "planned" (ะะ completed)
- [ ] POST /api/menu/{id}/start ะผะตะฝัะตั status: "cooking"
- [ ] POST /api/menu/{id}/complete ะผะตะฝัะตั status: "completed"
- [ ] PATCH /api/menu/{id} ะพะฑะฝะพะฒะปัะตั servings
- [ ] GET /api/menu/today ะฒะพะทะฒัะฐัะฐะตั ะฟัะฐะฒะธะปัะฝัะต ััะฐัััั

### Testing
- [ ] ะะพะฑะฐะฒะธัั ัะตัะตะฟั โ ะฟะพัะฒะปัะตััั ะฒ "ะ ะพัะตัะตะดะธ"
- [ ] ะะฐะถะฐัั "ะะพัะพะฒะธัั" โ ะฟะตัะตัะพะดะธั ะฒ "ะะพัะพะฒะธััั"
- [ ] ะะฐะถะฐัั "ะะพัะพะฒะพ!" โ ะฟะตัะตัะพะดะธั ะฒ "โ ะัะธะณะพัะพะฒะปะตะฝะพ ัะตะณะพะดะฝั"
- [ ] ะััะพัะธั ัะบัััะฐ ะฟะพ ัะผะพะปัะฐะฝะธั
- [ ] ะะพะฝัะพะปั ะฑะตะท ะพัะธะฑะพะบ

---

## ๐ ะะพัะพะฒะพ ะบ ะดะตะฟะปะพั?

โ **Frontend:** ะะพะปะฝะพัััั ะณะพัะพะฒ
โณ **Backend:** ะะดัะผ ัะธะบัะฐ ะดะปั `status: "planned"` ะฒะผะตััะพ `"completed"`

ะะพัะปะต ัะธะบัะฐ ะฝะฐ backend'ะต โ ะทะฐะฟัััะธัั ัะตััะพะฒัะต ััะตะฝะฐัะธะธ ะฒััะต.
