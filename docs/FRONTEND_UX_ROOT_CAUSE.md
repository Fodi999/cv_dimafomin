# üéØ –ö–æ—Ä–µ–Ω—å –ø—Ä–æ–±–ª–µ–º—ã - Frontend UX Issue

**–î–∞—Ç–∞**: 28 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ, —Ä–µ—à–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞
**Expired –ø—Ä–æ–¥—É–∫—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞**, —Ö–æ—Ç—è –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ:
- ‚ùå –û–Ω–∏ —É–∂–µ –ù–ï –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ
- ‚ùå –ò—Ö –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- ‚ùå –û–Ω–∏ –ù–ï –¥–æ–ª–∂–Ω—ã —É—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –≤ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- ‚úÖ –û–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ñ–∞–∫—Ç–æ–º –ø–æ—Ç–µ—Ä–∏, –∞ –Ω–µ –æ–±—ä–µ–∫—Ç–æ–º –¥–µ–π—Å—Ç–≤–∏—è

### UX –æ—à–∏–±–∫–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∫–∞—Ä—Ç–æ—á–∫—É:
```
üßÄ Ser
‚ùå Nie u≈ºywaj
Przeterminowane
```

–ù–æ –ø—Ä–∏ —ç—Ç–æ–º:
- ‚úÖ –ü—Ä–æ–¥—É–∫—Ç –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ "Produkty: 12"
- ‚úÖ –ü—Ä–æ–¥—É–∫—Ç –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ "Koszt: 107.81 PLN"
- ‚úÖ –ü—Ä–æ–¥—É–∫—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ —á–∞—Å—Ç—å —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞

**–≠—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

---

## üí° –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å

### –§–∏–ª–æ—Å–æ—Ñ–∏—è –ø—Ä–æ–µ–∫—Ç–∞:
```
expired ‚â† fridge item
expired = history / waste
```

### –ö–∞–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- **fridge_items** ‚Äî —Ç–æ–ª—å–∫–æ usable items (active + critical)
- **history_events** ‚Äî –ø–æ—Ç–µ—Ä–∏ (expired + damaged + spoiled)
- **–§–∏–∑–∏—á–µ—Å–∫–∏** item –º–æ–∂–µ—Ç –µ—â—ë —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ë–î ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- **–ö–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ** item –±–æ–ª—å—à–µ –Ω–µ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ ‚Äî —ç—Ç–æ –≥–ª–∞–≤–Ω–æ–µ

---

## üîß –†–µ—à–µ–Ω–∏–µ

### Backend: ‚úÖ –£–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- Expired items —Å–æ–∑–¥–∞—é—Ç history events
- Expired items —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ cleanup
- Endpoint `/api/history/losses` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ—Ç–µ—Ä–∏

### Frontend: ‚è≥ –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å**:

1. **–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å items** –ø–æ —Å—Ç–∞—Ç—É—Å—É:
   ```tsx
   const activeItems = items.filter(item => item.status !== 'expired');
   const expiredItems = items.filter(item => item.status === 'expired');
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å activeItems** –≤:
   - `<FridgeStats items={activeItems} />` ‚Üê –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - `<FridgeList items={activeItems} />` ‚Üê –°–ø–∏—Å–æ–∫
   - AI Actions –ø—Ä–æ–≤–µ—Ä–∫–∞
   - Hints –ø—Ä–æ–≤–µ—Ä–∫–∞

3. **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å expiredItems** –æ—Ç–¥–µ–ª—å–Ω–æ:
   ```tsx
   {expiredItems.length > 0 && (
     <ExpiredSummary
       count={expiredItems.length}
       value={expiredItems.reduce(...)}
       onClick={() => router.push('/losses')}
     />
   )}
   ```

---

## üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

–°–º. [`FRONTEND_EXPIRED_FIX.md`](./FRONTEND_EXPIRED_FIX.md) - –ø–æ—à–∞–≥–æ–≤—ã–π –≥–∞–π–¥ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞.

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### UI –î–æ ‚ùå
```
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚îú‚îÄ Produkty: 12 (–≤–∫–ª—é—á–∞—è 3 expired) ‚Üê WRONG
‚îú‚îÄ Koszt: 107.81 PLN ‚Üê WRONG
‚îî‚îÄ Ryzyko: 18.31 PLN ‚Üê WRONG

–°–ø–∏—Å–æ–∫:
‚îú‚îÄ Mleko (active)
‚îú‚îÄ Chleb (critical)
‚îî‚îÄ Ser (expired) ‚ùå Nie u≈ºywaj ‚Üê WRONG UX
```

### UI –ü–æ—Å–ª–µ ‚úÖ
```
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚îú‚îÄ Produkty: 9 (—Ç–æ–ª—å–∫–æ active + critical) ‚Üê CORRECT
‚îú‚îÄ Koszt: 89.50 PLN ‚Üê CORRECT
‚îî‚îÄ Ryzyko: 12.40 PLN ‚Üê CORRECT

üóëÔ∏è Zutylizowane:
‚îú‚îÄ 3 produkty ‚Ä¢ 18.31 PLN strat
‚îî‚îÄ [Zobacz historiƒô] ‚Üê –ü–µ—Ä–µ—Ö–æ–¥ –∫ /losses

–°–ø–∏—Å–æ–∫:
‚îú‚îÄ Mleko (active)
‚îî‚îÄ Chleb (critical)
    (expired items —É–¥–∞–ª–µ–Ω—ã) ‚Üê CORRECT
```

---

## üéì –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –≤—ã–≤–æ–¥

### –≠—Ç–æ –ù–ï –±–∞–≥ backend ‚ùå

Backend —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- ‚úÖ –°–æ–∑–¥–∞—ë—Ç history events
- ‚úÖ –£–¥–∞–ª—è–µ—Ç expired items
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç losses —á–µ—Ä–µ–∑ API

### –≠—Ç–æ UX issue frontend ‚ö†Ô∏è

Frontend –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç expired items —Ç–∞–º, –≥–¥–µ –∏—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚ùå –í —Å–ø–∏—Å–∫–µ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞
- ‚ùå –í —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
- ‚ùå –í —Ä–∞—Å—á—ë—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–µ ‚úÖ

–û–¥–∏–Ω —Ñ–∏–ª—å—Ç—Ä:
```tsx
const activeItems = items.filter(item => item.status !== 'expired');
```

–ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤–µ–∑–¥–µ, –≥–¥–µ —Ä–µ—á—å –∏–¥—ë—Ç –æ "—Å–æ–¥–µ—Ä–∂–∏–º–æ–º —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–∞".

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç—å [`FRONTEND_EXPIRED_FIX.md`](./FRONTEND_EXPIRED_FIX.md)
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é `activeItems` / `expiredItems`
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å `FridgeStats items={items}` ‚Üí `items={activeItems}`
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å `FridgeList items={items}` ‚Üí `items={activeItems}`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫ "üóëÔ∏è Zutylizowane" –¥–ª—è `expiredItems`
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å AI Actions –ø—Ä–æ–≤–µ—Ä–∫—É
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å hints –ø—Ä–æ–≤–µ—Ä–∫–∏
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å UI —Å expired items
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –∫ `/losses`

---

**–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 10-15 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: –°—Ä–µ–¥–Ω—è—è  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π (UX issue)

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –û—Ç–∫—Ä—ã—Ç—å [`FRONTEND_EXPIRED_FIX.md`](./FRONTEND_EXPIRED_FIX.md) –∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º.
