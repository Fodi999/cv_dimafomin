# ‚úÖ FIX: UserProvider Missing in Root Layout

**–î–∞—Ç–∞:** 26 —è–Ω–≤–∞—Ä—è 2026  
**–û—à–∏–±–∫–∞:** `useUser must be used within a UserProvider`  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üêõ –ü–†–û–ë–õ–ï–ú–ê

### –û—à–∏–±–∫–∞ Runtime
```
Error: useUser must be used within a UserProvider
    at useUser (contexts/UserContext.tsx:228:11)
    at AppLayout (app/(user)/layout.tsx:34:3)
```

### –ü—Ä–∏—á–∏–Ω–∞
`UserProvider` –Ω–µ –±—ã–ª –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ü–µ–ø–æ—á–∫—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –≤ `app/layout.tsx`.

`app/(user)/layout.tsx` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `useUser()` —Ö—É–∫, –Ω–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –≤—ã—à–µ –≤ –¥–µ—Ä–µ–≤–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### 1. –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç
```tsx
import { UserProvider } from "@/contexts/UserContext";
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω –≤ —Ü–µ–ø–æ—á–∫—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
```tsx
<AuthProvider>
  <UserProvider>           {/* üÜï –î–û–ë–ê–í–õ–ï–ù–û */}
    <SessionProvider>
      <SettingsProvider>
        ...
      </SettingsProvider>
    </SessionProvider>
  </UserProvider>           {/* üÜï –î–û–ë–ê–í–õ–ï–ù–û */}
</AuthProvider>
```

### 3. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
```
ThemeProvider
‚îî‚îÄ AuthProvider          (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
   ‚îî‚îÄ UserProvider       (–ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) ‚Üê –î–û–ë–ê–í–õ–ï–ù–û
      ‚îî‚îÄ SessionProvider (—Å–µ—Å—Å–∏—è)
         ‚îî‚îÄ SettingsProvider
            ‚îî‚îÄ LanguageProvider
               ‚îî‚îÄ CategoryProvider
                  ‚îî‚îÄ AIRecommendationProvider
                     ‚îî‚îÄ NotificationProvider
                        ‚îî‚îÄ NotificationRefetchProvider
```

---

## üìã –ü–û–ß–ï–ú–£ –í–ê–ñ–ï–ù –ü–û–†–Ø–î–û–ö

1. **AuthProvider** ‚Üí –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –∏ —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. **UserProvider** ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useAuth()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
3. **SessionProvider** ‚Üí –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–û—Å—Ç–∞–ª—å–Ω—ã–µ** ‚Üí –ú–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useUser()`

**UserProvider –∑–∞–≤–∏—Å–∏—Ç –æ—Ç AuthProvider**, –ø–æ—ç—Ç–æ–º—É –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–Ω—É—Ç—Ä–∏ –Ω–µ–≥–æ.

---

## üß™ –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev server:
   ```bash
   npm run dev
   ```

2. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `(user)` —Ä–æ—É—Ç–∞:
   - `/fridge`
   - `/recipes`
   - `/assistant`
   - `/losses`
   - `/profile`

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ—à–∏–±–∫–∞ `useUser must be used within a UserProvider` –±–æ–ª—å—à–µ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è

---

## üìÅ –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´

- ‚úÖ `app/layout.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω `UserProvider` –≤ —Ü–µ–ø–æ—á–∫—É

---

## üí° –£–†–û–ö

**–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ü–µ–ø–æ—á–∫—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:**
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ö—É–∫ `useSomething()` ‚Üí –ø—Ä–æ–≤–∞–π–¥–µ—Ä `<SomethingProvider>` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—à–µ –≤ –¥–µ—Ä–µ–≤–µ
- –ï—Å–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ ‚Üí –ø–æ–º–µ—Å—Ç–∏—Ç–µ –µ–≥–æ –≤–Ω—É—Ç—Ä—å
- Root layout –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
