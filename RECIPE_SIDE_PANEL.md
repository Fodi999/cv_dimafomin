# 📋 Выдвижная боковая панель рецептов

## 🎯 Что изменилось

Вместо модального окна в центре экрана, детали рецепта теперь открываются в **выдвижной панели справа**.

### До:
```
┌─────────────────────────────────────┐
│  Полный экран затемнен              │
│  ┌───────────────────────────────┐  │
│  │ Модальное окно в центре       │  │
│  │ (перекрывает весь контент)    │  │
│  └───────────────────────────────┘  │
└─────────────────────────────────────┘
```

### После:
```
┌─────────────────────────────────────┐
│ Карточки видны (затемнены)          │
│ ┌─────────────────────────────────────┐
│ │ Панель справа (500px)               │
│ │ + Плавная анимация слайда            │
│ │ + Можно скроллить контент            │
│ │ + Нажать вне панели = закрыть       │
│ └─────────────────────────────────────┘
└─────────────────────────────────────┘
```

---

## 🎨 Технические детали

### Размеры панели:
- **Мобильные (< 768px)**: Полная ширина экрана
- **Планшеты/ПК (≥ 768px)**: 500px (w-[500px])
- **Высота**: Полная высота экрана (h-screen)

### Анимация:
```tsx
// Входит справа
initial={{ x: "100%" }}       // Начально за экраном
animate={{ x: 0 }}            // Приезжает на место
transition={{ duration: 0.3 }} // За 300ms

// Выходит справа
exit={{ x: "100%" }}          // Уезжает за экран
```

### Фон:
- **Backdrop**: Полупрозрачный чёрный с blur (z-40)
- **Панель**: Белая/Тёмная тема (z-50, выше backdrop)
- **Нажать на backdrop** → закрывает панель

---

## 📐 Структура компонента

```tsx
<AnimatePresence>
  {isOpen && (
    <>
      {/* Backdrop (закрывающий слой) */}
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
        onClick={onClose}  // Нажать чтобы закрыть
        className="... z-40 ..." // Позади панели
      />

      {/* Side Panel */}
      <motion.div
        initial={{ x: "100%" }}    // Начинается справа
        animate={{ x: 0 }}         // Скользит влево
        exit={{ x: "100%" }}       // Скользит вправо при выходе
        transition={{ duration: 0.3 }}
        className="... z-50 ..."   // Впереди backdrop
      >
        {/* Header с кнопкой закрытия */}
        {/* Контент с прокруткой */}
        {/* Автоматический скролл вверх */}
      </motion.div>
    </>
  )}
</AnimatePresence>
```

---

## 🔧 Оптимизации для боковой панели

### 1. Фотография уменьшена:
```tsx
// ДО: height: 320px (h-80)
// ПОСЛЕ: height: 192px (h-48)

// ДО: Текст emoji 6xl
// ПОСЛЕ: Текст emoji 4xl

// ДО: Thumbnails 20px × 20px (w-20 h-20)
// ПОСЛЕ: Thumbnails 16px × 16px (w-16 h-16)
```

### 2. Кнопки навигации:
```tsx
// ДО: p-2 (большие) size-24
// ПОСЛЕ: p-1.5 (компактные) size-20
```

### 3. Видео:
```tsx
// Остаётся полноразмерным
// aspect-video автоматически масштабируется
// Можно развернуть на весь экран
```

### 4. Интервалы:
```tsx
// ДО: space-y-6 (большие)
// ПОСЛЕ: space-y-6 (можно уменьшить до space-y-4)
```

---

## 🎯 Поведение

### Открытие:
1. Пользователь клацает на карточку рецепта
2. `setShowDetails(true)` в `RecipePreviewCard.tsx`
3. Панель скользит справа (x: 100% → x: 0)
4. Backdrop появляется одновременно

### Закрытие:
1. **Вариант 1**: Клацнуть кнопку X (top-right)
2. **Вариант 2**: Клацнуть вне панели (на backdrop)
3. **Вариант 3**: Нажать ESC (если добавить)
4. Панель скользит вправо (x: 0 → x: 100%)
5. Backdrop исчезает

### Переход между рецептами:
- Панель остаётся открытой
- Просто меняется содержимое
- Скролл возвращается вверх

---

## 📱 Отзывчивость

### Мобильные (< 768px):
```css
width: 100%;           /* Полная ширина */
height: 100vh;         /* Полная высота */
```
✅ Удобно листать вверх-вниз
✅ Полный контент видно
✅ Легко закрыть (backdrop везде)

### Планшеты (768px - 1024px):
```css
width: 500px;          /* md:w-[500px] */
height: 100vh;
```
✅ Карточки видны сбоку
✅ Удобно работать
✅ Профессиональный вид

### Десктоп (> 1024px):
```css
width: 500px;
height: 100vh;
```
✅ Идеальная ширина
✅ Нет обрезаний
✅ Полная видимость контента

---

## 🔄 Интеграция с компонентами

### RecipePreviewCard.tsx
```tsx
const [showDetails, setShowDetails] = useState(false);

return (
  <>
    <motion.div>
      {/* Карточка */}
      <button onClick={() => setShowDetails(true)}>
        Деталі
      </button>
    </motion.div>
    
    {/* Панель открывается за счет showDetails */}
    <RecipeDetailsModal
      isOpen={showDetails}
      recipe={recipe}
      onClose={() => setShowDetails(false)}
    />
  </>
);
```

### RecipesPage.tsx
```tsx
// Используется как модальное окно (без изменений)
<RecipeDetailsModal
  isOpen={showDetails}
  recipe={recipe}
  onClose={() => setShowDetails(false)}
/>
```

---

## ⌨️ Возможные улучшения

### Добавить закрытие по ESC:
```tsx
useEffect(() => {
  const handleEscape = (e: KeyboardEvent) => {
    if (e.key === "Escape") onClose();
  };
  
  window.addEventListener("keydown", handleEscape);
  return () => window.removeEventListener("keydown", handleEscape);
}, [onClose]);
```

### Добавить свайп на мобильных:
```tsx
import { useSwipeable } from "react-swipeable";

const handlers = useSwipeable({
  onSwipedRight: onClose,
});

<motion.div {...handlers}>
  {/* Content */}
</motion.div>
```

### Добавить навигацию между рецептами:
```tsx
// Кнопки "Предыдущий" и "Следующий" в header
<button onClick={() => showPrevRecipe()}>← Попередній</button>
<button onClick={() => showNextRecipe()}>Наступний →</button>
```

### Переразмеры при скроллинге:
```tsx
// Header можно сделать меньше при скроллинге
// Используя onScroll event
```

---

## 🎬 Анимационные детали

### Transition Settings:
```tsx
transition={{ 
  duration: 0.3,        // 300ms анимация
  ease: "easeInOut"     // Плавный вход-выход
}}
```

### Backdrop:
```tsx
transition={{ duration: 0.3 }}  // Совпадает с панелью
opacity: 0 → 1                  // Появляется вместе
```

### Результат:
✨ **Синхронная анимация** - панель и фон приезжают одновременно
✨ **Плавная** - easeInOut не резкая
✨ **Быстрая** - 300ms достаточно для заметности

---

## 🐛 Возможные проблемы и решения

### Проблема: Скролл не работает
```tsx
// ✅ Решение: Панель имеет overflow-y-auto
className="... overflow-y-auto"
```

### Проблема: Фото обрезаны
```tsx
// ✅ Решение: object-cover сохраняет пропорции
className="w-full h-full object-cover"
```

### Проблема: Видео не масштабируется
```tsx
// ✅ Решение: aspect-video автоматически
className="aspect-video"
```

### Проблема: Панель не закрывается
```tsx
// Проверьте:
1. onClick={onClose} на backdrop
2. onClick={onClose} на X кнопке
3. e.stopPropagation() нет на backdrop
```

---

## 📊 Размеры контента

### На мобильном (100% ширины):
```
┌─────────────────────────────────┐
│ X               [Название]      │ Header (60px)
├─────────────────────────────────┤
│                                 │
│ Фото (192px)                    │ Photos
│ Thumbnails (16×16 каждая)       │
│                                 │
├─────────────────────────────────┤
│ 🎥 Відео (aspect-video)         │ Video
│                                 │
├─────────────────────────────────┤
│ 📝 Опис (max 3 строк + скролл)  │ Description
│                                 │
├─────────────────────────────────┤
│ 🥘 Інгредієнти (список)         │ Ingredients
│                                 │
├─────────────────────────────────┤
│ 👨‍🍳 Приготування (нумерованно)    │ Instructions
│                                 │
├─────────────────────────────────┤
│ ℹ️ Інформація (сітка 2 колонки)  │ Info Grid
│                                 │
└─────────────────────────────────┘
```

### На планшете/ПК (500px):
```
┌─────────────────────────────────┐
│ X             [Название рецепта]│ Header
├─────────────────────────────────┤
│ Фото (192px × ~280px)           │
│ Thumbnails (16px)               │
├─────────────────────────────────┤
│ Видео (500px × 281px)           │
├─────────────────────────────────┤
│ Опис...                         │
│ Інгредієнти...                  │
│ Приготування...                 │
│ Інформація...                   │
└─────────────────────────────────┘
```

---

## 🚀 Performance Tips

1. ✅ `overflow-y-auto` - только на контейнере
2. ✅ `z-50` для панели, `z-40` для фона
3. ✅ `motion.div` использует CSS transforms (GPU)
4. ✅ `AnimatePresence` управляет монтированием
5. ✅ Images имеют `object-cover` для оптимизации

**Результат**: Гладкая 60fps анимация даже на слабых устройствах

---

**Готово к использованию!** 🎉
