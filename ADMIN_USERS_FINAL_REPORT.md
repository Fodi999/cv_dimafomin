# ‚úÖ ADMIN USERS - –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –±—ç–∫–µ–Ω–¥–∞** ‚úÖ
```typescript
// –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö:
GET /api/admin/users/stats  ‚Üí KPI –±–ª–æ–∫
GET /api/admin/users        ‚Üí –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

// ‚ùå –ù–ï–¢ –º–æ–∫–æ–≤ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
// ‚ùå –ù–ï–¢ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
// ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Next.js API Routes
```

### 2. **KPI –±–ª–æ–∫ (UsersKPI)** ‚úÖ
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –í—Å—å–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:  54                ‚îÇ ‚Üê stats.total
‚îÇ –ê–∫—Ç–∏–≤–Ω—ñ —Å—å–æ–≥–æ–¥–Ω—ñ:     0                 ‚îÇ ‚Üê stats.active_today (–∏–∑ lastLogin)
‚îÇ –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω—ñ:          0                 ‚îÇ ‚Üê stats.blocked (–∏–∑ status)
‚îÇ –ü—Ä–µ–º—ñ—É–º:              ‚Äî                 ‚îÇ ‚Üê stats.premium (‚Äî –µ—Å–ª–∏ 0)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3. **–¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** ‚úÖ

#### –ö–æ–ª–æ–Ω–∫–∏:
1. **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á** - –∞–≤–∞—Ç–∞—Ä + –∏–º—è + email
2. **–†–æ–ª—å** - user | admin | superadmin
3. **–°—Ç–∞—Ç—É—Å** - üü¢ –ê–∫—Ç–∏–≤–Ω–∏–π | üî¥ –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π | üü° –û—á—ñ–∫—É—î
4. **–û—Å—Ç–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** - "2 –≥–æ–¥–∏–Ω–∏ —Ç–æ–º—É" | "–ù—ñ–∫–æ–ª–∏ –Ω–µ –≤—Ö–æ–¥–∏–≤"
5. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –∑–∞–∫–∞–∑—ã + –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã–µ –¥–µ–Ω—å–≥–∏
6. **–î—ñ—ó** - –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

#### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ–Ω—è—Ç–∏–π:
```typescript
// STATUS = –ü–†–ê–í–ê (Account Status)
status: "active" | "blocked" | "pending"

// ACTIVITY = –ü–û–í–ï–î–ï–ù–ò–ï (User Activity)  
lastActiveAt: timestamp  // –∏–∑ lastLogin —Å –±—ç–∫–µ–Ω–¥–∞
```

### 4. **–§–∏–ª—å—Ç—Ä—ã** ‚úÖ
```typescript
// –°—Ç–∞—Ç—É—Å (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞):
"all" | "active" | "blocked" | "pending"

// –†–æ–ª—å:
"all" | "user" | "admin" | "superadmin"

// ‚ùå –ù–ï–¢ —Ñ–∏–ª—å—Ç—Ä–∞ "–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–µ–≥–æ–¥–Ω—è" - —ç—Ç–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –Ω–µ —Ñ–∏–ª—å—Ç—Ä
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ
**–ü—Ä–∏—á–∏–Ω–∞:** Go backend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `lastLogin` (camelCase), —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏—Å–∫–∞–ª `last_login_at` (snake_case)

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// app/api/admin/users/route.ts - –º–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π
data.users = data.users.map((user: any) => ({
  ...user,
  lastActiveAt: user.lastLogin || user.last_login || user.lastActiveAt,
  joinedAt: user.createdAt || user.created_at || user.joinedAt,
}));
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: TypeScript –æ—à–∏–±–∫–∏
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤ `status: "inactive"` vs `"pending"`

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –û–±–Ω–æ–≤–∏–ª–∏ –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
- AdminUser.status: "active" | "blocked" | "pending" ‚úÖ
- UsersFilters.status: "all" | "active" | "blocked" | "pending" ‚úÖ
- User.status: "active" | "blocked" | "pending" ‚úÖ
```

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```
PostgreSQL (Go Backend)
    ‚Üì GET /api/admin/users
    ‚Üì returns: { users: [...], meta: {...} }
    ‚Üì fields: lastLogin, createdAt (camelCase)
    ‚Üì
Next.js API Route (Proxy + Mapper)
    ‚Üì –ú–∞–ø–ø–∏—Ç: lastLogin ‚Üí lastActiveAt
    ‚Üì –ú–∞–ø–ø–∏—Ç: createdAt ‚Üí joinedAt
    ‚Üì –°–æ–∑–¥–∞–µ—Ç meta –µ—Å–ª–∏ –Ω–µ—Ç
    ‚Üì
React Hook (useAdminUsers)
    ‚Üì –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ state
    ‚Üì
UI Components
    ‚Üì UsersKPI - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    ‚Üì UsersTable - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫
    ‚Üì UsersFilters - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
```

## üé® UI/UX —Ä–µ—à–µ–Ω–∏—è

### Status Badge (–°—Ç–∞—Ç—É—Å = –ü—Ä–∞–≤–∞)
```tsx
üü¢ –ê–∫—Ç–∏–≤–Ω–∏–π    - –º–æ–∂–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–æ–π
üî¥ –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π - –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω  
üü° –û—á—ñ–∫—É—î      - –æ–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
```

### Last Activity (–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å = –ü–æ–≤–µ–¥–µ–Ω–∏–µ)
```tsx
"–©–æ–π–Ω–æ"           - < 1 –º–∏–Ω—É—Ç—ã
"5 —Ö–≤ —Ç–æ–º—É"       - < 1 —á–∞—Å–∞
"2 –≥–æ–¥ —Ç–æ–º—É"      - < 24 —á–∞—Å–æ–≤
"3 –¥–Ω —Ç–æ–º—É"       - < 7 –¥–Ω–µ–π
"21 –≥—Ä—É–¥–Ω—è 2025"  - > 7 –¥–Ω–µ–π
"–ù—ñ–∫–æ–ª–∏ –Ω–µ –≤—Ö–æ–¥–∏–≤" - null
```

### Premium Badge
```tsx
value={premium && premium > 0 ? premium : "‚Äî"}
tooltip="–ü—Ä–µ–º—ñ—É–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø–æ–∫–∏ –Ω–µ–º–∞—î"
isUnavailable={!premium || premium === 0}
```

## üìà –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
–í—Å—å–æ–≥–æ: 54 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
‚îú‚îÄ‚îÄ –ê–∫—Ç–∏–≤–Ω–∏—Ö —Å—å–æ–≥–æ–¥–Ω—ñ: 0 (0%)
‚îú‚îÄ‚îÄ –ê–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞ –º—ñ—Å—è—Ü—å: 14 (25.9%)
‚îî‚îÄ‚îÄ –ù–µ–∞–∫—Ç–∏–≤–Ω–∏—Ö 30+ –¥–Ω—ñ–≤: 40 (74.1%)

–ü–æ —Ä–æ–ª—è–º:
‚îú‚îÄ‚îÄ home_chef: 49 (90.7%)
‚îú‚îÄ‚îÄ admin: 4 (7.4%)
‚îî‚îÄ‚îÄ investor: 1 (1.9%)

–ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏—Ö: 0
–ü—Ä–µ–º—ñ—É–º: 0
```

## ‚úÖ Checklist

- [x] KPI –±–ª–æ–∫ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [x] –¢–∞–±–ª–∏—Ü–∞ —Å 54 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏–∑ –ë–î
- [x] –°—Ç–∞—Ç—É—Å: active/blocked/pending
- [x] –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞
- [x] –§–∏–ª—å—Ç—Ä—ã: status + role
- [x] –ú–∞–ø–ø–∏–Ω–≥: lastLogin ‚Üí lastActiveAt
- [x] –ú–∞–ø–ø–∏–Ω–≥: createdAt ‚Üí joinedAt
- [x] Premium –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "‚Äî" –µ—Å–ª–∏ 0
- [x] –ù–µ—Ç –º–æ–∫–æ–≤ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- [x] –ù–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
- [x] TypeScript –±–µ–∑ –æ—à–∏–±–æ–∫

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É `/admin/users` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ KPI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: 54 total, 0 active today, 0 blocked, ‚Äî premium
2. ‚úÖ –¢–∞–±–ª–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 54 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. ‚úÖ –ö–æ–ª–æ–Ω–∫–∞ "–û—Å—Ç–∞–Ω–Ω—è –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å" —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏
4. ‚úÖ –§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç (active/blocked/pending)
5. ‚úÖ –ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

---

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê SaaS-—É—Ä–æ–≤–µ–Ω—å  
**–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Status ‚â† Activity  
**–ß–µ—Å—Ç–Ω–æ—Å—Ç—å UI:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —á—Ç–æ –µ—Å—Ç—å  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ‚úÖ Production Ready
