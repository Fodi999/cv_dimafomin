# –†–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π - Admin Auto-Redirect

## üéØ –ó–∞–¥–∞—á–∞
–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ admin –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å —Å—Ä–∞–∑—É –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (`/admin/dashboard`), –∞ –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚Äî –Ω–∞ **–≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É** `/` (–ª–µ–Ω–¥–∏–Ω–≥).

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –ø–æ —Ä–æ–ª–∏
- `login()` –∏ `register()` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç URL –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `getRedirectUrl(role)`: admin/superadmin ‚Üí `/admin/dashboard`, –æ—Å—Ç–∞–ª—å–Ω—ã–µ ‚Üí `/assistant`

### 2. –ì–ª–æ–±–∞–ª—å–Ω–∞—è –º–æ–¥–∞–ª–∫–∞ –≤—Ö–æ–¥–∞
- **–ù–æ–≤—ã–π —Ñ–∞–π–ª**: `/components/auth/GlobalAuthModal.tsx`
- –ú–æ–¥–∞–ª–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö, –≤–∫–ª—é—á–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ `AuthContext`

### 3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–æ–ª–∏ "superadmin"
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `UserContext` (—Ç–∏–ø `User.role`)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ `AdminLayout` –¥–ª—è –æ–±–µ–∏—Ö —Ä–æ–ª–µ–π

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Root Layout
- `GlobalAuthModal` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `/app/layout.tsx`
- –ú–æ–¥–∞–ª–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `/contexts/AuthContext.tsx` | ‚úèÔ∏è `login()` –∏ `register()` –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `Promise<string>`, –¥–æ–±–∞–≤–ª–µ–Ω `getRedirectUrl()` |
| `/contexts/UserContext.tsx` | ‚úèÔ∏è –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–æ–ª—å `"superadmin"` |
| `/components/auth/AuthModal.tsx` | ‚úèÔ∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç URL –∏–∑ `login()` –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ |
| `/components/auth/GlobalAuthModal.tsx` | üÜï –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è –º–æ–¥–∞–ª–∫–∏ |
| `/app/layout.tsx` | ‚úèÔ∏è –î–æ–±–∞–≤–ª–µ–Ω `<GlobalAuthModal />` |
| `/app/admin/layout.tsx` | ‚úèÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–µ–∏—Ö —Ä–æ–ª–µ–π (admin + superadmin) |
| `/docs/ADMIN_AUTO_REDIRECT.md` | üÜï –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |

## üîÑ Flow –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞

```
1. User opens /admin/dashboard
         ‚Üì
2. AdminLayout: No user found
         ‚Üì
3. openAuthModal("login")
         ‚Üì
4. GlobalAuthModal shows login form
         ‚Üì
5. User enters credentials
         ‚Üì
6. login(email, password)
         ‚Üì
7. Backend returns { token, user: { role } }
         ‚Üì
8. getRedirectUrl(role)
         ‚Üì
   Admin?           Regular user?
     ‚Üì                    ‚Üì
/admin/dashboard    /assistant
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. ‚úÖ –ù–µ–∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `/admin/dashboard` ‚Üí –ú–æ–¥–∞–ª–∫–∞ –≤—Ö–æ–¥–∞
2. ‚úÖ –ê–¥–º–∏–Ω –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ ‚Üí –ü–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ `/admin/dashboard`
3. ‚úÖ –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ ‚Üí –ü–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ `/assistant`
4. ‚úÖ NavigationBurger —Å–∫—Ä—ã—Ç –Ω–∞ –∞–¥–º–∏–Ω-—Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
5. ‚úÖ –ú–æ–¥–∞–ª–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö

### üîç Console logs (–æ–∂–∏–¥–∞–µ–º—ã–µ):
```
[AdminLayout] üîê Access check: {hasUser: false, ...}
[AdminLayout] ‚ùå No user - opening auth modal
üö´ [NavigationBurger] Hidden on admin page: /admin/dashboard
[AuthContext] üì• Login response: { success: true, data: {...} }
[AuthContext] ‚úÖ Login successful, role: admin
[AuthContext] üîê Admin detected, redirecting to /admin/dashboard
```

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –≤–µ—Å—å flow —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ê–¥–º–∏–Ω —Å—Ä–∞–∑—É –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ /assistant
- ‚úÖ –ú–æ–¥–∞–ª–∫–∞ –≤—Ö–æ–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ
- ‚úÖ NavigationBurger —Å–∫—Ä—ã—Ç –Ω–∞ –∞–¥–º–∏–Ω-—Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ superadmin —Ä–æ–ª–∏
